{"version":3,"sources":["webpack:///src/views/my/wallet/withdrawal.vue","webpack:///./src/views/my/wallet/withdrawal.vue?63cf","webpack:///./src/views/my/wallet/withdrawal.vue"],"names":["withdrawal","name","data","discUrl","token","userId","money","bankAccount","bankIcon","bankClass","rate","Balance","preBalance","fee","serviceCharge","created","this","bank","localStorage","getItem","cbank","encryption","decrypt","Object","bankCardAttribution","cardTypeName","isDrawPass","getPayment","getLogin","methods","getMoney","toFixed","_this","$axios","get","then","res","code","i","len","object","length","currency","msg","that","global","ws","readyState","onopen","onmessage","websocketonmessage","actions","action","reqID","send","stringify_default","websocketonerror","e","redata","JSON","parse","balance","CashWithdrawal","$router","push","params","setCashWithdrawal","amount","drawPass","$route","oldPass","getCashWithdrawal","toast","message","position","duration","onClose","linkHome","linkWithdrawal","tradeTab","wallet_withdrawal","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","$t","right-text","left-arrow","on","click-left","click-right","_v","_s","placeholder","input","model","value","callback","$$v","expression","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/51.b3e8da619bde9eaa39d0.js","sourcesContent":["<!--<template>-->\n<!--    <div class=\"withdrawal-box\">-->\n<!--      <div class=\"withdrawal-bar\">-->\n<!--        <van-nav-bar-->\n<!--          :title=\"$t('withdraw')\"-->\n<!--          :right-text=\"$t('WRecord')\"-->\n<!--          left-arrow-->\n<!--          @click-left=\"linkHome\"-->\n<!--          @click-right=\"linkWithdrawal\"-->\n<!--        />-->\n<!--      </div>-->\n<!--      <div class=\"withdrawal-title\">-->\n<!--        <div>{{$t('DebitCard')}}</div>-->\n<!--        <img :src=\"bankIcon\">-->\n<!--        <div>-->\n<!--          <div>{{bank}}</div>-->\n<!--          <div>{{$t('TailNumber')}}{{bankAccount}}{{bankClass}}</div>-->\n<!--        </div>-->\n<!--      </div>-->\n<!--      <div class=\"withdrawal-content\">-->\n<!--        <div>{{$t('WMoney')}}</div>-->\n<!--        <div class=\"withdrawal-input\">-->\n<!--          <van-cell-group>-->\n<!--            <van-field v-model=\"money\" @input=\"getMoney\" :placeholder=\"$t('KTMoney')+Balance\">-->\n<!--              <div slot=\"left-icon\" class=\"input-icon\">$</div>-->\n<!--            </van-field>-->\n<!--          </van-cell-group>-->\n<!--        </div>-->\n<!--        <div>-->\n<!--&lt;!&ndash;          <div style=\"width: 50%;display: inline-block;color: #8C8B8B\">当前余额：<span style=\"color: #101010\">${{Balance}}</span></div>&ndash;&gt;-->\n<!--          <div style=\"width: 100%;display: inline-block;color: #8C8B8B\">{{$t('RMBMoney')}}：<span style=\"color: #101010\">￥{{preBalance}}</span></div>-->\n<!--          <div style=\"width: 60%;display: inline-block;color: #8C8B8B;\">{{$t('rate')}}：<span style=\"color: #101010\">{{rate}}</span></div>-->\n<!--          <div style=\"width: 40%;display: inline-block;float: right;color: #8C8B8B;text-align: right\">{{$t('ServiceCharge')}}：<span style=\"color: #101010\">￥{{serviceCharge}}</span></div>-->\n<!--        </div>-->\n<!--      </div>-->\n<!--      <div class=\"withdrawal-but\" @click=\"CashWithdrawal\">{{$t('withdraw')}}</div>-->\n<!--      <router-view></router-view>-->\n<!--    </div>-->\n<!--</template>-->\n\n<template>\n  <div class=\"withdrawal-box\">\n    <div class=\"withdrawal-bar\">\n      <van-nav-bar\n        :title=\"$t('withdraw')\"\n        :right-text=\"$t('WRecord')\"\n        left-arrow\n        @click-left=\"linkHome\"\n        @click-right=\"linkWithdrawal\"\n      />\n    </div>\n    <div class=\"withdrawal-name\">{{$t('DebitCard')}}</div>\n    <div class=\"withdrawal-title\">\n      <div>\n        <div>{{bank}}</div>\n        <div>{{bankAccount}}</div>\n      </div>\n    </div>\n    <div class=\"withdrawal-content\">\n      <div>{{$t('WMoney')}}</div>\n      <div class=\"withdrawal-input\">\n        <van-cell-group>\n          <van-field v-model=\"money\" @input=\"getMoney\" :placeholder=\"$t('KTMoney')+Balance\">\n            <div slot=\"left-icon\" class=\"input-icon\">$</div>\n          </van-field>\n        </van-cell-group>\n      </div>\n    </div>\n    <div class=\"withdrawal-but\" @click=\"CashWithdrawal\">{{$t('withdraw')}}</div>\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\n  import { bankCardAttribution } from '../../../utils/bankCardAttribution'\n  import EP from '../../../utils/encryption'\n  import { Toast } from 'vant'\nexport default {\n  name: 'withdrawal',\n  data () {\n    return {\n      discUrl:'',\n      token:'',\n      userId:'',\n      // 提现金额\n      money: '',\n      // 银行卡号\n      bankAccount:'',\n      // 银行logo\n      bankIcon:'',\n      // 银行卡类型\n      bankClass:'',\n      // 汇率\n      rate:'',\n      // 当前余额\n      Balance:0,\n      preBalance:0,\n      // 手续费系数\n      fee:0,\n      // 手续费\n      serviceCharge:0\n    }\n  },\n  created(){\n    this.bank = localStorage.getItem('bank')\n    // this.bankIcon = require('../../../assets/bank/'+this.bank+'.png')\n    let cbank = EP.decrypt(localStorage.getItem('bankAccount'),'')\n    console.log(cbank,'cbank')\n    this.bankAccount = cbank\n    this.bankClass = bankCardAttribution(cbank).cardTypeName\n    this.isDrawPass = localStorage.getItem(\"isDrawPass\")\n    this.token =  localStorage.getItem('token')\n    this.userId = localStorage.getItem('uid')\n    // this.discUrl = '47.74.187.199'\n    this.discUrl = localStorage.getItem('discUrl')\n    this.getPayment()\n    this.getLogin()\n  },\n  methods: {\n    // 计算手续费\n    getMoney(){\n      this.serviceCharge = (this.fee*(this.money/this.rate)).toFixed(2)\n      this.preBalance = (this.money/this.rate).toFixed(2)\n    },\n    // 获取汇率\n    getPayment(){\n      this.$axios.get('http://'+this.discUrl+':7777/api/exchangerate/all').then(res =>{\n        console.log(res)\n        if(res.data.code === 0) {\n          for(let i=0,len = res.data.object.length;i<len;i++){\n            if(res.data.object[i].currency === \"CNY\"){\n              console.log(res.data.object[i])\n              this.rate = res.data.object[i].rate\n              console.log(this.rate)\n            }\n          }\n        }\n      })\n\n    },\n    // 获取账号信息\n    getLogin(msg) {\n      let that = this;\n      // console.log(that.global.ws);\n      if (that.global.ws && that.global.ws.readyState === 1) {\n        // console.log(\"发送信息\", msg);\n        that.global.ws.onopen = that.onopen()\n      }\n      that.global.ws.onmessage = function(res) {\n        that.websocketonmessage (res)\n      };\n    },\n    onopen () { // websocket连接后发送数据(send发送)\n      let actions;\n      let that = this\n      actions = {\n        action: \"opermoney\",\n        reqID: 83,\n      } // 请根据实际项目需要进行修改\n      that.global.ws.send(JSON.stringify(actions))\n    },\n    websocketonerror () { // 连接建立失败重连\n      this.getLogin()\n    },\n    websocketonmessage (e) { // 数据接收\n      this.redata = JSON.parse(e.data)\n      console.log(this.redata)\n      if(this.redata.data.code === 0 && this.redata.data.object != null){\n        this.Balance = this.redata.data.object.balance\n        this.fee = this.redata.data.object.fee\n      }\n    },\n    // 提现\n    CashWithdrawal(){\n      let that= this\n      // if(this.isDrawPass !== '0' && this.money !== ''){\n        this.$router.push({\n          name:'extract',\n          params:{\n            money:this.money\n          }\n        })\n      // }else {\n      //   Toast({\n      //     message:that.$t('setFP'),\n      //     duration:2000,\n      //   })\n      // }\n    },\n    setCashWithdrawal () { // websocket连接后发送数据(send发送)\n      let actions;\n      let that = this\n      actions = {\n        action: \"outmoney\",\n        reqID: 84,\n        data: {\n          amount:that.money,\n          drawPass:that.$route.params.oldPass,\n        }\n      } // 请根据实际项目需要进行修改\n      that.global.ws.send(JSON.stringify(actions))\n    },\n    getCashWithdrawal (e) { // 数据接收\n      let that = this;\n      this.redata = JSON.parse(e.data)\n      console.log(this.redata)\n      if(this.redata.action === \"outmoney\"){\n        if(this.redata.data.code === 0){\n          Toast({\n            message:'提交成功！',\n            position:'bottom',\n            duration:1000,\n          })\n        }else {\n          Toast({\n            message:that.redata.data.msg,\n            position:'bottom',\n            duration:1000,\n            onClose() {\n              that.$router.push({\n                name:'withdrawal'\n              })\n            }\n          })\n        }\n      }\n    },\n    // 返回上级\n    linkHome () {\n      this.$router.push({\n        name:'my'\n      })\n    },\n    // 跳转到提现记录\n    linkWithdrawal () {\n      this.$router.push({\n        name: 'capitalRecord', // 这里通过name来引入router\n        params: {\n          tradeTab: 2\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"../../../style/my\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my/wallet/withdrawal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"withdrawal-box\"},[_c('div',{staticClass:\"withdrawal-bar\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.$t('withdraw'),\"right-text\":_vm.$t('WRecord'),\"left-arrow\":\"\"},on:{\"click-left\":_vm.linkHome,\"click-right\":_vm.linkWithdrawal}})],1),_vm._v(\" \"),_c('div',{staticClass:\"withdrawal-name\"},[_vm._v(_vm._s(_vm.$t('DebitCard')))]),_vm._v(\" \"),_c('div',{staticClass:\"withdrawal-title\"},[_c('div',[_c('div',[_vm._v(_vm._s(_vm.bank))]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.bankAccount))])])]),_vm._v(\" \"),_c('div',{staticClass:\"withdrawal-content\"},[_c('div',[_vm._v(_vm._s(_vm.$t('WMoney')))]),_vm._v(\" \"),_c('div',{staticClass:\"withdrawal-input\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"placeholder\":_vm.$t('KTMoney')+_vm.Balance},on:{\"input\":_vm.getMoney},model:{value:(_vm.money),callback:function ($$v) {_vm.money=$$v},expression:\"money\"}},[_c('div',{staticClass:\"input-icon\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"},[_vm._v(\"$\")])])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"withdrawal-but\",on:{\"click\":_vm.CashWithdrawal}},[_vm._v(_vm._s(_vm.$t('withdraw')))]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42b8b089\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/my/wallet/withdrawal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42b8b089\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./withdrawal.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./withdrawal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./withdrawal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42b8b089\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./withdrawal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-42b8b089\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/wallet/withdrawal.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}