webpackJsonp([61],{nqck:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("mvHQ"),o=s.n(e),a=(s("eqfM"),s("/QYm")),n={name:"PLSheet",data:function(){return{name:"",nameEN:"",sheetStopShow:"",showStopProfit:!0,showStopLoss:!0,stopProfit:null,stopLoss:null,positionid:"",instrumentid:"",newClose:0,bidPrice:0,askPrice:0,add:0,diffPriceRate:"0.00%",average:0,volume:0,direction:"",priceperpoint:0,NEWCPL:0,tick:0,tickCopyData:"",showWinPrice:"",showLosePrice:""}},props:{tradeTab:{type:Number},appTick:{type:Array}},watch:{appTick:function(t){if(""!==JSON.parse(localStorage.tickCopy)&&(this.tickCopyData=JSON.parse(localStorage.tickCopy)),void 0!==this.tickCopyData[this.instrumentid]){var i=this.tickCopyData[this.instrumentid];this.newClose=i.price.toFixed(this.digits),this.bidPrice=i.bidprice.toFixed(this.digits),this.askPrice=i.askprice.toFixed(this.digits),this.add=(i.price-i.preclose).toFixed(this.digits),0===i.preclose?this.diffPriceRate="--":this.diffPriceRate=((Number(i.price)-Number(i.preclose))/i.preclose*100).toFixed(this.digits)+"%","卖"===this.direction?this.NEWCPL=-1*Number((Number(i.price-this.average)*this.volume*this.priceperpoint*this.rate).toFixed(2)):this.NEWCPL=Number((Number(i.price-this.average)*this.volume*this.priceperpoint*this.rate).toFixed(2))}}},created:function(){var t=this.$route.params;this.name=t.name,this.nameEN=t.nameEN,this.positionid=t.positionid,this.instrumentid=t.instrumentid,this.digits=t.digits,this.average=t.average,this.volume=t.volume,this.direction=t.direction,this.rate=t.rate,this.priceperpoint=t.priceperpoint,this.tick=t.tick,this.showWinPrice=t.winPrice,this.showLosePrice=t.losePrice,0!==this.showWinPrice?(this.showStopProfit=!1,this.stopProfit=this.showWinPrice):this.stopProfit=t.NEWPRICE,0!==this.showLosePrice?(this.showStopLoss=!1,this.stopLoss=this.showLosePrice):this.stopLoss=t.NEWPRICE;var i=JSON.parse(localStorage.getItem("tickCopy")),s=i[this.instrumentid];this.newClose=s.price.toFixed(this.digits),this.bidPrice=s.bidprice.toFixed(this.digits),this.askPrice=s.askprice.toFixed(this.digits),this.add=(s.price-s.preclose).toFixed(this.digits),0===s.preclose?this.diffPriceRate="--":this.diffPriceRate=((Number(s.price)-Number(s.preclose))/s.preclose*100).toFixed(this.digits)+"%","卖"===this.direction?this.NEWCPL=-1*(s.price-this.average*this.volume*this.priceperpoint*this.rate).toFixed(2):this.NEWCPL=((s.price-this.average)*this.volume*this.priceperpoint*this.rate).toFixed(2)},methods:{sellOut:function(){this.showSellOut=!0},closePosition:function(){this.showClosePosition=!0},noShowSheet:function(){this.$emit("contentStyle","start"),localStorage.removeItem("upTitle"),localStorage.removeItem("positionid"),this.$router.push({name:"trade",params:{PLshow:!0}})},handdleMsg:function(t){if(this.showStopProfit&&this.showStopLoss)Object(a.a)({message:this.$t("PLMessage"),duration:2e3,position:"bottom"});else{var i=this;i.global.ws&&1==i.global.ws.readyState&&(i.global.ws.onopen=i.onopen()),i.global.ws.onmessage=function(t){i.websocketonmessage(t)}}},onopen:function(){for(var t=void 0,i=0,s=this.positionid.length;i<s;i++)this.positionid[i]=Number(this.positionid[i]),this.showStopProfit&&!this.showStopLoss&&(t={action:"positionstopwin",reqID:82,data:{positionid:this.positionid[i],losePrice:Number(this.stopLoss),winPrice:0}}),!this.showStopProfit&&this.showStopLoss&&(t={action:"positionstopwin",reqID:82,data:{positionid:this.positionid[i],losePrice:0,winPrice:this.stopProfit}}),this.showStopProfit||this.showStopLoss||(t={action:"positionstopwin",reqID:82,data:{positionid:this.positionid[i],losePrice:this.stopLoss,winPrice:this.stopProfit}}),this.global.ws.send(o()(t))},websocketonmessage:function(t){this.redata=JSON.parse(t.data);var i=this;if("positionstopwin"===this.redata.action)if(0===this.redata.data.code)a.a.success({duration:1e3,message:i.$t("PLSMessage"),onClose:function(){i.$router.push({name:"blank"})}});else switch(i.redata.data.msg){case"止盈价必须大于止损价":a.a.fail({duration:1e3,message:i.$t("failMessage1")});break;case"止盈价必须大于当前价":a.a.fail({duration:1e3,message:i.$t("failMessage2")});break;case"止损价必须小于当前价":a.a.fail({duration:1e3,message:i.$t("failMessage3")});break;case"止盈价必须小于止损价":a.a.fail({duration:1e3,message:i.$t("failMessage4")})}}}},r={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"actionSheet"},[s("van-action-sheet",{staticClass:"sheet-box sheet-trade",attrs:{overlay:"",round:""},on:{cancel:t.noShowSheet,"click-overlay":t.noShowSheet},model:{value:t.sheetStopShow,callback:function(i){t.sheetStopShow=i},expression:"sheetStopShow"}},[s("div",{staticClass:"sheet-content "},[s("div",{staticClass:"title"},[s("div",{staticClass:"name"},[s("div",{class:"en"===t.$i18n.locale?"name-en":""},[t._v(t._s("zh"!==t.$i18n.locale?t.nameEN:t.name))]),t._v(" "),s("div",{staticStyle:{color:"#808080"}},[t._v(t._s(t.instrumentid))])]),t._v(" "),s("div",{staticClass:"close"},[s("div",{style:{color:t.add<0?t.$t("fall"):t.$t("rise")}},[t._v(t._s(t.newClose))]),t._v(" "),s("div",{style:{color:t.add<0?t.$t("fall"):t.$t("rise")}},[t.add>0?s("span",[t._v("+")]):t._e(),t._v(t._s(t.add)+" "+t._s(t.diffPriceRate))])]),t._v(" "),s("div",{staticClass:"BAPrice"},[s("div",[t._v(t._s(t.$t("Buy"))+"："),s("span",{staticStyle:{color:"#FD4F50"}},[t._v(t._s(t.bidPrice))])]),t._v(" "),s("div",[t._v(t._s(t.$t("Sell"))+"："),s("span",{staticStyle:{color:"#0CAD6B"}},[t._v(t._s(t.askPrice))])])])]),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"name1"},[s("div",[t._v(t._s(t.$t("AveragePrice")))]),t._v(" "),s("div",[t._v(t._s(t.average))])]),t._v(" "),s("div",{staticClass:"name1"},[s("div",[t._v(t._s(t.$t("Number")))]),t._v(" "),s("div",[t._v(t._s(t.volume))])]),t._v(" "),s("div",{staticClass:"name1"},[s("div",[t._v(t._s(t.$t("PL")))]),t._v(" "),s("div",{style:{color:t.add<0?t.$t("fall"):t.$t("rise")}},[t._v("$"+t._s(t.NEWCPL))])])]),t._v(" "),s("div",{staticClass:"number"},[s("div",{class:"en"===t.$i18n.locale?"en-number-title":""},[t._v(t._s(t.$t("SP"))+"：")]),t._v(" "),t.showStopProfit?s("div",{class:"en"===t.$i18n.locale?"en-showStopProfit showStopProfit":"showStopProfit",on:{click:function(i){t.showStopProfit=!1}}},[s("div",{staticClass:"showStopProfit__minus"}),t._v(" "),s("div",{class:"en"===t.$i18n.locale?"showStopProfit__minus-content en-content":"showStopProfit__minus-content"},[t._v(t._s(t.$t("inpSP")))]),t._v(" "),s("div",{staticClass:"showStopProfit__plus"})]):s("van-stepper",{class:"en"===t.$i18n.locale?"en-stepper":"",attrs:{"default-value":"请输入止盈价",min:t.tick,step:t.tick,"decimal-length":t.digits},model:{value:t.stopProfit,callback:function(i){t.stopProfit=i},expression:"stopProfit"}})],1),t._v(" "),s("div",{staticClass:"number"},[s("div",{class:"en"===t.$i18n.locale?"en-number-title":""},[t._v(t._s(t.$t("SL"))+"：")]),t._v(" "),t.showStopLoss?s("div",{class:"en"===t.$i18n.locale?"en-showStopProfit showStopProfit":"showStopProfit",on:{click:function(i){t.showStopLoss=!1}}},[s("div",{staticClass:"showStopProfit__minus"}),t._v(" "),s("div",{class:"en"===t.$i18n.locale?"showStopProfit__minus-content en-content":"showStopProfit__minus-content"},[t._v(t._s(t.$t("inpSL")))]),t._v(" "),s("div",{staticClass:"showStopProfit__plus"})]):s("van-stepper",{class:"en"===t.$i18n.locale?"en-stepper":"",attrs:{"default-value":"请输入止损价",min:t.tick,step:t.tick,"decimal-length":t.digits},model:{value:t.stopLoss,callback:function(i){t.stopLoss=i},expression:"stopLoss"}})],1),t._v(" "),s("div",{staticClass:"PL-but"},[s("van-button",{staticClass:"sheet-trade-but",staticStyle:{"background-color":"#EBEBEB",color:"#666666"},attrs:{to:"/trade"}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),s("van-button",{staticClass:"sheet-trade-but",staticStyle:{"background-color":"#2E8CFF",color:"#fff"},on:{click:t.handdleMsg}},[t._v(t._s(t.$t("SetUp")))])],1)])])],1)},staticRenderFns:[]};var c=s("VU/8")(n,r,!1,function(t){s("vEvU")},"data-v-20950dac",null);i.default=c.exports},vEvU:function(t,i){}});
//# sourceMappingURL=61.d240af4a0bf21bfff11d.js.map