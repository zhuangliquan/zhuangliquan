webpackJsonp([1],{OUCv:function(t,e){},XQaH:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("eqfM");var n=o("/QYm"),s={name:"changePassword",data:function(){return{code:"",phone:"",showPhone:"",showPhoneBtn:!1,attcode:!0,showbtn:!0,code_ts:"获取验证码",sec:60,keying:"",discUrl:"",inputPhoneError:"",inputCodeError:""}},watch:{phone:function(t){var e=/\b1[3456789]\d{9}\b/g.test(t);this.attcode=!e}},created:function(){this.discUrl=localStorage.getItem("discUrl"),"true"===localStorage.abnormal&&localStorage.removeItem("Flag")},beforeRouteEnter:function(t,e,o){o(function(t){"signIn"===e.name&&(t.showPhoneBtn=!1,t.phone=t.$route.params.phone),"my"===e.name&&(t.showPhoneBtn=!0,t.phone=localStorage.getItem("phone"),t.showPhone=localStorage.getItem("phone").substr(0,3)+"*****"+localStorage.getItem("phone").substr(8))})},methods:{inputPhone:function(){var t=this.phone,e=/\b1[3456789]\d{9}\b/g.test(t);this.inputPhoneError=e?"":"手机号格式错误，请重新填写！"},inputCode:function(){var t=this.code,e=/^\d{5}$/g.test(t);this.inputCodeError=e?"":"验证码输入有误，请重新确认！"},linkHome:function(){this.$router.go(-1)},getyzcode:function(){var t=this;this.$axios.get("http://"+this.discUrl+":7777/api/user/sms/"+this.phone).then(function(e){if(0===e.data.code&&null!=e.data.object){Object(n.a)({duration:1e3,position:"bottom",message:"验证码发送成功"}),t.keying=e.data.object.keying;var o=setInterval(function(){t.sec=t.sec-1,t.code_ts=t.sec+"S后重试",t.showbtn=!1,0===t.sec&&(clearInterval(o),t.sec=60,t.code_ts=t.sec+"S后重试",t.showbtn=!0)},1e3)}else Object(n.a)({duration:1e3,position:"bottom",message:"验证码发送失败"})})},linkNewPassword:function(){""!=this.phone&&""!=this.code?this.showPhoneBtn?this.$router.push({name:"myNewPassword",params:{phone:this.phone,code:this.code,keying:this.keying,fromOff:!0}}):this.$router.push({name:"newPassword",params:{phone:this.phone,code:this.code,keying:this.keying,fromOff:!1}}):Object(n.a)({duration:1e3,message:"内容不能为空！",position:"bottom"})}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"changePassword"},[o("div",{staticClass:"record-bar"},[o("van-nav-bar",{attrs:{title:"登录密码修改","left-arrow":""},on:{"click-left":t.linkHome}})],1),t._v(" "),t.showPhoneBtn?o("div",{staticClass:"title"},[t._v("为了您的账号安全,您需要验证手机号后才能修改密码。点击获取验证码,您将收到一条附有验证码的短信")]):o("div",{staticClass:"title"},[t._v("点击获取验证码,您将收到一条附有验证码的短信,以便修改账户密码。")]),t._v(" "),o("div",{staticClass:"content"},[o("van-cell-group",[t.showPhoneBtn?o("van-field",[o("div",{staticClass:"phone",attrs:{slot:"label"},slot:"label"},[o("div",[t._v("手机号：")]),t._v(" "),o("div",[t._v(t._s(t.showPhone))])])]):o("van-field",{attrs:{placeholder:"请输入手机号码","error-message":t.inputPhoneError},on:{input:t.inputPhone},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._v(" "),o("van-field",{attrs:{placeholder:"请输入短信验证码","error-message":t.inputCodeError},on:{input:t.inputCode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[t.showbtn?o("van-button",{staticClass:"code",attrs:{slot:"button",disabled:t.attcode},on:{click:t.getyzcode},slot:"button"},[t._v("获取验证码")]):o("van-button",{staticClass:"code",attrs:{slot:"button"},slot:"button"},[t._v(t._s(t.code_ts))])],1)],1)],1),t._v(" "),o("div",{staticClass:"button",on:{click:t.linkNewPassword}},[t._v("下一步")])])},staticRenderFns:[]};var i=o("VU/8")(s,a,!1,function(t){o("OUCv")},"data-v-aad95cea",null);e.default=i.exports}});
//# sourceMappingURL=1.53e02537fd877c6fbd02.js.map