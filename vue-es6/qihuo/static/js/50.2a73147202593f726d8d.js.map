{"version":3,"sources":["webpack:///src/views/my/accountManage/forgetPassword.vue","webpack:///./src/views/my/accountManage/forgetPassword.vue?4a48","webpack:///./src/views/my/accountManage/forgetPassword.vue"],"names":["forgetPassword","name","data","cardID","phone","code","showbtn","code_ts","sec","discUrl","keying","idError","inputCodeError","created","this","localStorage","getItem","methods","inputButton","Object","verificationId","showBut","inputCode","value","val","test","linkHome","$router","go","getyzcode","_this","$axios","get","then","res","object","toast","duration","position","message","timer","setInterval","clearInterval","linkSetFundPassword","push","params","modify","accountManage_forgetPassword","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","left-arrow","on","click-left","_v","label","placeholder","error-message","input","model","callback","$$v","expression","disabled","slot","_s","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/50.2a73147202593f726d8d.js","sourcesContent":["<template>\n  <div class=\"changePassword\">\n    <div class=\"record-bar\">\n      <van-nav-bar\n        title=\"忘记资金密码\"\n        left-arrow\n        @click-left=\"linkHome\"\n      />\n    </div>\n    <div class=\"content\">\n      <van-cell-group>\n        <van-field class=\"id\" v-model=\"cardID\" label=\"身份证号：\" placeholder=\"请输入身份证号\" :error-message=\"idError\" @input=\"inputButton\">\n        </van-field>\n        <van-field disabled>\n          <div slot=\"label\" class=\"phone\">\n            <div>手机号：</div>\n            <div>{{phone}}</div>\n          </div>\n        </van-field>\n        <van-field v-model=\"code\" placeholder=\"请输入短信验证码\"  @input=\"inputCode\" :error-message=\"inputCodeError\">\n          <div slot=\"button\" class=\"code\" @click=\"getyzcode\"  v-if=\"showbtn\">获取验证码</div>\n          <div slot=\"button\" class=\"code\" v-else>{{code_ts}}</div>\n        </van-field>\n      </van-cell-group>\n    </div>\n    <div class=\"button\" @click=\"linkSetFundPassword\">下一步</div>\n  </div>\n</template>\n\n<script>\n  import { IdentityCodeValid } from '../../../utils/verificationId'\n  import { Toast } from 'vant';\nexport default {\n  name: 'forgetPassword',\n  data () {\n    return {\n      cardID:'',\n      phone:'',\n      code: '',\n      // 按钮显示隐藏\n      showbtn: true, // 展示获取验证码或倒计时按钮判断\n      code_ts: '获取验证码', // 倒计时提示文字\n      sec: 60, // 倒计时秒数\n      discUrl:'',\n      keying:'',\n      idError:'',\n      inputCodeError:'',\n    }\n  },\n  created(){\n    this.phone = localStorage.getItem('phone')\n    this.discUrl = localStorage.getItem('discUrl')\n  },\n  methods: {\n    // 验证身份证\n    inputButton () {\n      if(IdentityCodeValid(this.cardID) === true){\n        this.showBut = true\n        this.idError = ''\n      }else {\n        this.showBut = false\n        this.idError = IdentityCodeValid(this.cardID)\n      }\n    },\n    inputCode () {\n      let value = this.code\n      let reg = /^\\d{5}$/g\n      let val = reg.test(value)\n      console.log(val)\n      if (val) {\n        this.inputCodeError = ''\n      } else {\n        this.inputCodeError = '验证码输入有误，请重新确认！'\n      }\n    },\n    // 返回上级\n    linkHome () {\n      this.$router.go(-1)\n    },\n    getyzcode () {\n      // 短信发送失败，提示手机号已注册\n      this.$axios.get('http://'+this.discUrl+':7777/api/user/sms/' + this.phone).then(res => {\n        console.log(res)\n        if (res.data.code === 0 && res.data.object != null) {\n          Toast({\n            duration:1000,\n            position:'bottom',\n            message:'验证码发送成功'\n          })\n          this.keying = res.data.object.keying\n          let timer = setInterval(() => {\n            this.sec = this.sec - 1\n            this.code_ts = this.sec + 'S后重试'\n            this.showbtn = false\n            if (this.sec === 0) {\n              clearInterval(timer)\n              this.sec = 60\n              this.code_ts = this.sec + 'S后重试'\n              this.showbtn = true\n            }\n          }, 1000)\n        }else {\n          Toast({\n            duration:1000,\n            position:'bottom',\n            message:'验证码发送失败'\n          })\n        }\n      })\n    },\n    // forgetPass(){\n    //   let that = this;\n    //   if (that.global.ws && that.global.ws.readyState == 1) {\n    //     that.global.ws.onopen = that.setForgetPass()\n    //   }\n    //   that.global.ws.onmessage = function(res) {\n    //     that.getForgetPass (res)\n    //   };\n    // },\n    // setForgetPass () { // websocket连接后发送数据(send发送)\n    //   let actions;\n    //   let that = this\n    //   let money = this.$route.params.money\n    //   actions = {\n    //     action: \"forgetDrawPass\",\n    //     reqID: 97,\n    //     data: {\n    //       amount:money,\n    //       drawPass:that.Password,\n    //     }\n    //   } // 请根据实际项目需要进行修改\n    //   that.global.ws.send(JSON.stringify(actions))\n    // },\n    // getForgetPass (e) { // 数据接收\n    //   let that = this;\n    //   this.redata = JSON.parse(e.data)\n    //   console.log(this.redata)\n    //   if(this.redata.action === \"outmoney\"){\n    //     if(this.redata.data.ok){\n    //\n    //     }else {\n    //       Toast.clear()\n    //       Toast({\n    //         message: that.redata.data.msg,\n    //         forbidClick: true,\n    //         duration:3000,\n    //       })\n    //     }\n    //   }\n    // },\n    // 下一步设置新资金密码\n    linkSetFundPassword () {\n      let that = this\n      console.log(this.cardID)\n      console.log(this.code)\n      if(this.cardID != '' && this.code != ''){\n        this.$router.push({\n          name: 'setFundPassword',\n          params:{\n            modify:'forget',\n            keying:that.keying,\n            code:that.code\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"../../../style/my\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my/accountManage/forgetPassword.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"changePassword\"},[_c('div',{staticClass:\"record-bar\"},[_c('van-nav-bar',{attrs:{\"title\":\"忘记资金密码\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.linkHome}})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('van-cell-group',[_c('van-field',{staticClass:\"id\",attrs:{\"label\":\"身份证号：\",\"placeholder\":\"请输入身份证号\",\"error-message\":_vm.idError},on:{\"input\":_vm.inputButton},model:{value:(_vm.cardID),callback:function ($$v) {_vm.cardID=$$v},expression:\"cardID\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"disabled\":\"\"}},[_c('div',{staticClass:\"phone\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[_vm._v(\"手机号：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.phone))])])]),_vm._v(\" \"),_c('van-field',{attrs:{\"placeholder\":\"请输入短信验证码\",\"error-message\":_vm.inputCodeError},on:{\"input\":_vm.inputCode},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}},[(_vm.showbtn)?_c('div',{staticClass:\"code\",attrs:{\"slot\":\"button\"},on:{\"click\":_vm.getyzcode},slot:\"button\"},[_vm._v(\"获取验证码\")]):_c('div',{staticClass:\"code\",attrs:{\"slot\":\"button\"},slot:\"button\"},[_vm._v(_vm._s(_vm.code_ts))])])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":_vm.linkSetFundPassword}},[_vm._v(\"下一步\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4373ff46\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/my/accountManage/forgetPassword.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4373ff46\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./forgetPassword.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./forgetPassword.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./forgetPassword.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4373ff46\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./forgetPassword.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4373ff46\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/accountManage/forgetPassword.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}