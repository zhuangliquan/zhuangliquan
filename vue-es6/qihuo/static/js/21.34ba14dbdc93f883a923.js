webpackJsonp([21],{"4hBG":function(t,o,e){t.exports=e.p+"static/img/loginTop.86539c5.png"},THUl:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});e("XmAh");var s=e("il3B"),n=e("mvHQ"),a=e.n(n),i=(e("eqfM"),e("/QYm")),r={name:"index",data:function(){return{Phone:"",Password:"",InvitationCode:"",code:"",codeShow:!0,loginMode:"验证码登录",loginModeOff:!1,statement:"",confirm:!0,attcode:!0,showbtn:!0,yzcode:"",code_ts:"获取验证码",sec:60,websock:null,keying:"",signIn:!1,discUrl:"",inputPhoneError:"",inputPhoneErrorOff:!0,inputCodeError:"",inputCodeErrorOff:!0,inputPasswordError:"",inputPasswordErrorOff:!0,imageUrl:e("4hBG")}},watch:{Phone:function(t){var o=/\b1[3456789]\d{9}\b/g.test(t);this.attcode=!o}},created:function(){localStorage.setItem("abnormal","true"),this.discUrl=localStorage.getItem("discUrl")},destroyed:function(){this.websock&&this.websock.close()},methods:{inputPhone:function(){var t=this.Phone;/[a-zA-Z0-9_]$/g.test(t)?(this.inputPhoneError="",this.inputPhoneErrorOff=!0):(this.inputPhoneError=this.$t("accountError"),this.inputPhoneErrorOff=!1)},inputCode:function(){var t=this.code,o=/^\d{5}$/g.test(t);this.inputCodeError=o?"":"验证码输入有误，请重新确认！"},inputPassword:function(){var t=this.Password;/^ +| +$/g.test(t)?(this.inputPasswordError=this.$t("inputPasswordError"),this.inputPasswordErrorOff=!1):(this.inputPasswordError="",this.inputPasswordErrorOff=!0)},linkHome:function(){this.$router.go(-1)},getyzcode:function(){var t=this;this.$axios.get("http://"+this.discUrl+":7777/api/user/smsregister/"+this.Phone).then(function(o){if(0===o.data.code&&null!=o.data.object){Object(i.a)({duration:1e3,position:"bottom",message:"验证码发送成功"}),t.keying=o.data.object.keying;var e=setInterval(function(){t.sec=t.sec-1,t.code_ts=t.sec+"S后重试",t.showbtn=!1,0===t.sec&&(clearInterval(e),t.sec=60,t.code_ts=t.sec+"S后重试",t.showbtn=!0)},1e3)}else"手机号已注册"===o.data.msg&&i.a.fail("手机号已注册请返回登录界面")})},getLogin:function(){var t=this;!0===this.inputPhoneErrorOff&&!0===this.inputPasswordErrorOff?(t.global.ws&&1===t.global.ws.readyState&&(this.global.ws.onopen=this.websocketonopen()),t.global.ws.onmessage=function(o){t.websocketonmessage(o)}):Object(i.a)({message:t.$t("newMessage"),duration:2e3,position:"bottom",onClose:function(){t.Phone="",t.Password=""}})},websocketonopen:function(){var t={action:"register",reqID:5,data:{name:"",account:this.Phone,password:this.Password,paccount:this.InvitationCode,is_sim:1}};this.global.ws.send(a()(t))},websocketonmessage:function(t){this.redata=JSON.parse(t.data);var o=this;if("register"===this.redata.action)if(0===this.redata.data.code){i.a.clear();this.redata.data.msg;s.a.confirm({title:o.$t("DialogTitle"),showCancelButton:!1,className:"dialog-class",confirmButtonText:o.$t("confirmButtonText"),message:o.$t("DialogMessage")+o.Phone}).then(function(){o.$router.push({name:"signIn",params:{phone:o.Phone}})})}else{var e=this.redata.data.msg,n="";n="该账户已存在"===e?o.$t("logonF1"):"邀请码不存在"===e?o.$t("logonF2"):o.$t("logonF3"),Object(i.a)({message:n,position:"bottom",duration:2e3})}},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){}}},c={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"register-box"},[e("div",{staticClass:"register-bar",style:{backgroundImage:"url("+t.imageUrl+")"}},[e("div",[t._v(t._s(t.$t("huanYing"))),e("br"),t._v(t._s(t.$t("appName")))])]),t._v(" "),e("div",{staticClass:"open-account"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("Slogan")))]),t._v(" "),e("div",{staticClass:"upData-input phone-error"},[e("van-cell-group",[e("van-field",{attrs:{placeholder:t.$t("EnterPhone"),"error-message":t.inputPhoneError},on:{input:t.inputPhone},model:{value:t.Phone,callback:function(o){t.Phone=o},expression:"Phone"}}),t._v(" "),e("van-field",{attrs:{type:"password",placeholder:t.$t("Password"),"error-message":t.inputPasswordError},on:{input:t.inputPassword},model:{value:t.Password,callback:function(o){t.Password=o},expression:"Password"}}),t._v(" "),e("van-field",{attrs:{placeholder:t.$t("EnterInvitation")},model:{value:t.InvitationCode,callback:function(o){t.InvitationCode=o},expression:"InvitationCode"}})],1)],1),t._v(" "),e("div",{staticClass:"upBankCard-but",on:{click:t.getLogin}},[t._v(t._s(t.$t("logon")))]),t._v(" "),e("div",{staticClass:"tips",on:{click:t.linkHome}},[t._v(t._s(t.$t("HaveAccount"))+"，"),e("span",{staticStyle:{color:"#1988FF"}},[t._v(t._s(t.$t("SignIn")))])])])])},staticRenderFns:[]};var d=e("VU/8")(r,c,!1,function(t){e("uM4a")},"data-v-74c0a08e",null);o.default=d.exports},uM4a:function(t,o){}});
//# sourceMappingURL=21.34ba14dbdc93f883a923.js.map