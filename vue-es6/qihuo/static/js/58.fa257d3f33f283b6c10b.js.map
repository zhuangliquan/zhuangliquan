{"version":3,"sources":["webpack:///src/views/trade/components/quickClosing.vue","webpack:///./src/views/trade/components/quickClosing.vue?ed6b","webpack:///./src/views/trade/components/quickClosing.vue"],"names":["quickClosing","name","data","discUrl","sheetTradeShow","diffPriceRate","priceperpoint","NEWCPL","digits","upTitle","stepperMax","stepper","add","stopProfit","stopLoss","styleClass","show","instrumentid","uid","showClosePosition","newClose","averageClose","bondClose","directionClose","serviceChargeClose","changeContentOff","detailedData","orderList","tsNum","tickCopyData","props","appTick","type","Array","tradeTab","Number","watch","newVal","JSON","parse","localStorage","tickCopy","this","undefined","price","toFixed","preclose","average","rate","created","routeData","$route","params","userid","nameEN","MaxVolume","groupid","getItem","dis","encryption","decrypt","discount","stringify_default","i","commissionClose","margin","handdleMsg","methods","sellOut","showSellOut","closePosition","noShowSheet","$emit","removeItem","$router","push","msg","that","global","ws","readyState","onopen","onmessage","res","websocketonmessage","ConfirmClosing","_this","onopen3","websocketonmessage3","CancelClosing","setOrderList","balance","direction","diff","length","action","reqID","id","settlementid","source","positionid","orderRef","ordersysid","volume","volumeTraded","priceType","limitPrice","distanceStopPrice","distanceProfitPrice","status","closed","frozenMargin","frozenMarginMember","tradingDay","createtime","updatetime","canceltime","hedge","hedgeChannel","distanceStop","distanceProfit","send","sum","len","toast","loading","message","$t","duration","mask","forbidClick","onClose","Object","position","e","redata","code","fail","clear","actions","userId","object","volumeClosed","volumeFrozen","a","sarr","arr","factorial","idx","components_quickClosing","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","closeOnPopstate","show-cancel-button","cancel-button-text","cancelButtonColor","confirmButtonColor","show-confirm-button","confirm-button-text","on","cancel","confirm","model","value","callback","$$v","expression","slot","_v","_s","$i18n","locale","style","color","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/58.fa257d3f33f283b6c10b.js","sourcesContent":["<template>\n  <div>\n    <div class=\"dialog\">\n     <div class=\"sellOut\">\n      <van-dialog\n        closeOnPopstate\n        v-model=\"showClosePosition\"\n        show-cancel-button\n        :cancel-button-text=\"$t('cancel')\"\n        cancelButtonColor=\"#8C8B8B\" confirmButtonColor=\"#1988FF\"\n        show-confirm-button\n        :confirm-button-text=\"$t('ConfirmC')\"\n        @cancel=\"CancelClosing\"\n        @confirm=\"ConfirmClosing\"\n      >\n        <div slot=\"title\" class=\"dia-title\">{{$t('OrderInform')}}</div>\n        <div slot=\"default\" class=\"dia-content\">\n          <div>\n            <div>{{$t('Name')}}：</div>\n            <div class=\"dia-content-title\">{{$i18n.locale !== 'zh'?nameEN:name}}</div>\n          </div>\n          <div>\n            <div>{{$t('code')}}：</div>\n            <div class=\"dia-content-title1\">{{instrumentid}}</div>\n          </div>\n          <div>\n            <div>{{$t('direction')}}：</div>\n            <div><span :style=\"{color:directionClose === '买'? '#0CAD6B':'#FD4F50'}\">{{directionClose === '买'?$t('sell'):$t('buy')}}</span></div>\n          </div>\n          <div>\n            <div>{{$t('PL')}}($)：</div>\n            <div :style=\"{color:NEWCPL<0?'#25B100':'#FE0000'}\"> {{NEWCPL}}</div>\n          </div>\n          <div>\n            <div>{{$t('LatestPrice')}}：</div>\n            <div :style=\"{color:add<0?'#25B100':'#FE0000'}\">{{newClose}}</div>\n          </div>\n          <div>\n            <div>{{$t('AveragePrice')}}：</div>\n            <div>{{average}}</div>\n          </div>\n          <div>\n            <div>{{$t('Qty')}}：</div>\n            <div>{{stepper}}</div>\n          </div>\n          <div>\n            <div>{{$t('margin')}}：</div>\n            <div>{{bondClose}}</div>\n          </div>\n          <div>\n            <div>{{$t('ServiceCharge')}}：</div>\n            <div>{{serviceChargeClose}}</div>\n          </div>\n        </div>\n      </van-dialog>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import EP from '../../../utils/encryption'\n  import { Toast } from 'vant';\n    export default {\n      name: \"quickClosing\",\n      data(){\n          return{\n            discUrl:'',\n            name:'',\n            sheetTradeShow:'',\n            diffPriceRate:0,\n            priceperpoint:0,\n            NEWCPL:0,\n            digits:0,\n            upTitle:'11',\n            stepperMax:3,\n            stepper:1,\n            add:0,\n            // 传给父组件的值\n            stopProfit:'11',\n            stopLoss:'1000',\n            styleClass: 'start',\n            show:false,\n            instrumentid:'',\n\n            // 用户id\n            uid:'',\n            // 弹出框-平仓显示\n            showClosePosition: true,\n            // 平仓\n            newClose:0,\n            averageClose:0,\n            bondClose:0,\n            directionClose:0,\n            serviceChargeClose:0,\n            changeContentOff:true,\n            // 详细订单\n            detailedData:[],\n            // 存放订单号\n            orderList:[],\n            tsNum:0,\n            tickCopyData:'',\n          }\n      },\n      props:{\n        appTick:{\n          type:Array,\n        },\n        tradeTab:{\n          type:Number\n        }\n      },\n      watch:{\n        appTick(newVal) {\n          if(JSON.parse(localStorage.tickCopy) !== ''){\n            this.tickCopyData = JSON.parse(localStorage.tickCopy)\n          }\n          if(this.tickCopyData[this.instrumentid] !== undefined){\n            let data = this.tickCopyData[this.instrumentid]\n            this.newClose = (data.price).toFixed(this.digits)\n            this.add = (data.price-data.preclose).toFixed(this.digits)\n            // console.log('this.directionClose :>> ', this.directionClose);\n            if(this.directionClose === '卖'){\n              this.NEWCPL = Number((Number(data.price-this.average)*this.stepper*this.priceperpoint*this.rate).toFixed(2))*-1;\n              // console.log('this.NEWCPL :>> ', this.NEWCPL);\n            }else {\n              console.log('this.stepper :>> ', this.stepper);\n              this.NEWCPL = Number((Number(data.price-this.average)*this.stepper*this.priceperpoint*this.rate).toFixed(2));\n            }\n          }\n        }\n      },\n      created(){\n        // this.discUrl = '121.43.137.150'\n        let routeData =  this.$route.params\n        this.instrumentid = routeData.instrumentid\n        this.uid = routeData.userid\n        this.name = routeData.name\n        this.nameEN = routeData.nameEN\n        this.digits = routeData.digits\n        this.rate = routeData.rate\n        this.priceperpoint = routeData.priceperpoint\n        this.average = this.$route.params.average\n        this.directionClose = this.$route.params.directionClose\n        this.stepperMax = this.$route.params.MaxVolume\n        this.stepper = this.stepperMax\n        console.log(this.stepperMax,this.stepper)\n        this.groupid = this.$route.params.groupid\n        if(localStorage.getItem('discount') !== null){\n          let dis = EP.decrypt(localStorage.getItem('discount'),'')\n          let discount = JSON.parse(dis)\n          if(JSON.stringify(discount.data) !== '{}'){\n            for(let i in discount.data) {\n              if(i === this.groupid){\n                console.log(discount.data[i])\n                this.serviceChargeClose = (((this.$route.params.commissionClose)*discount.data[i])/100)*this.stepper\n              }\n            }\n          }else {\n            this.serviceChargeClose = (this.$route.params.commissionClose)*this.stepper\n          }\n        }\n        this.bondClose = this.$route.params.margin\n        let tickCopy = JSON.parse(localStorage.getItem('tickCopy'))\n        let tickCopyData = tickCopy[this.instrumentid]\n        console.log(tickCopy[this.instrumentid])\n        this.newClose = (tickCopyData.price).toFixed(this.digits)\n        this.add = (tickCopyData.price-tickCopyData.preclose).toFixed(this.digits)\n        // if(this.direction === '卖'){\n        //   this.NEWCPL = ((tickCopyData.price-this.average*this.stepper*this.priceperpoint*this.rate).toFixed(2))*-1;\n        // }else {\n        //   this.NEWCPL = (((tickCopyData.price-this.average)*this.stepper*this.priceperpoint*this.rate).toFixed(2));\n        // }\n        this.handdleMsg()\n      },\n      methods:{\n        // 弹出框-卖出\n        sellOut () {\n          this.showSellOut = true\n        },\n        // 弹出框-平仓\n        closePosition () {\n          this.showClosePosition = true\n          this.bondClose = this.$route.params.margin\n        },\n        // 关闭上拉框\n        noShowSheet () {\n          this.$emit('contentStyle',this.styleClass,this.show);\n          localStorage.removeItem('positionid')\n          localStorage.removeItem('upTitle')\n          this.$router.push({\n            name:'trade',\n          })\n        },\n        handdleMsg(msg) {\n          let that = this;\n          if (that.global.ws && that.global.ws.readyState == 1) {\n            console.log(\"发送信息\", msg);\n            that.global.ws.onopen = that.onopen()\n          }\n          that.global.ws.onmessage = function(res) {\n            that.websocketonmessage (res)\n          };\n        },\n        // 确认平仓\n        ConfirmClosing(){\n          let _this = this\n          this.global.ws.onopen = this.onopen3()\n          this.global.ws.onmessage = function(res) {\n            _this.websocketonmessage3 (res)\n          };\n        },\n        CancelClosing(){\n          this.$emit('contentStyle',this.styleClass,this.show);\n          this.$router.push({\n            name:'trade'\n          })\n        },\n        // 提交平仓\n        onopen3 () { // websocket连接后发送数据(send发送)\n          console.log(this.stepper,'this.stepper')\n          this.setOrderList(this.stepper)\n          let balance,direction,actions;\n          let that = this\n          let diff = that.stepper\n          console.log(that.stepper)\n          let routeData = this.$route.params\n          if(routeData.directionClose === '买'){\n            direction = 0\n          }else if(routeData.directionClose === '卖'){\n            direction = 1\n          }\n          console.log(this.orderList)\n          if(this.orderList.length<=1){\n            balance = {\n              action: \"placeorder\",\n              reqID: 34,\n              data: {\n                id: null,\n                userid: routeData.userid,\n                settlementid: null,\n                source: null,\n                type: 1,\n                positionid: routeData.positionid[0],\n                instrumentid: routeData.instrumentid,\n                orderRef: \"9f538075-fff6-4e84-9fee-505ce91fecf6\",\n                ordersysid: null,\n                direction: direction,\n                volume: that.stepper,\n                volumeTraded: null,\n                priceType: 1,\n                limitPrice: 0,\n                distanceStopPrice: null,\n                distanceProfitPrice: null,\n                status: null,\n                closed: null,\n                frozenMargin: null,\n                frozenMarginMember: null,\n                tradingDay: null,\n                createtime: null,\n                updatetime: null,\n                canceltime: null,\n                hedge: null,\n                hedgeChannel: null,\n                distanceStop: 0.0,\n                distanceProfit: 0.0\n              }\n            }\n            that.global.ws.send(JSON.stringify(balance))\n          }else {\n            let sum = 0\n            for (let i=0,len = this.orderList.length;i<len;i++){\n              balance = {\n                action: \"placeorder\",\n                reqID: 34,\n                data: {\n                  id: null,\n                  userid: routeData.userid,\n                  settlementid: null,\n                  source: null,\n                  type: 1,\n                  positionid: that.orderList[i].id,\n                  instrumentid: routeData.instrumentid,\n                  orderRef: \"9f538075-fff6-4e84-9fee-505ce91fecf6\",\n                  ordersysid: null,\n                  direction: direction,\n                  volume: that.orderList[i].volume,\n                  volumeTraded: null,\n                  priceType: 1,\n                  limitPrice: 0,\n                  distanceStopPrice: null,\n                  distanceProfitPrice: null,\n                  status: null,\n                  closed: null,\n                  frozenMargin: null,\n                  frozenMarginMember: null,\n                  tradingDay: null,\n                  createtime: null,\n                  updatetime: null,\n                  canceltime: null,\n                  hedge: null,\n                  hedgeChannel: null,\n                  distanceStop: 0.0,\n                  distanceProfit: 0.0\n                }\n              }\n              if(i<this.orderList.length-1){\n                sum = sum + this.orderList[i].volume\n              }\n              if(i === this.orderList.length-1){\n                balance = {\n                  action: \"placeorder\",\n                  reqID: 34,\n                  data: {\n                    id: null,\n                    userid: routeData.userid,\n                    settlementid: null,\n                    source: null,\n                    type: 1,\n                    positionid: that.orderList[i].id,\n                    instrumentid: routeData.instrumentid,\n                    orderRef: \"9f538075-fff6-4e84-9fee-505ce91fecf6\",\n                    ordersysid: null,\n                    direction: direction,\n                    volume: diff-sum,\n                    volumeTraded: null,\n                    priceType: 1,\n                    limitPrice: 0,\n                    distanceStopPrice: null,\n                    distanceProfitPrice: null,\n                    status: null,\n                    closed: null,\n                    frozenMargin: null,\n                    frozenMarginMember: null,\n                    tradingDay: null,\n                    createtime: null,\n                    updatetime: null,\n                    canceltime: null,\n                    hedge: null,\n                    hedgeChannel: null,\n                    distanceStop: 0.0,\n                    distanceProfit: 0.0\n                  }\n                }\n              }\n              console.log(balance,'balance')\n              that.global.ws.send(JSON.stringify(balance))\n            }\n          }\n          Toast.loading({\n            message: that.$t('quickC'),\n            duration: 0,\n            mask:true,\n            forbidClick: true,\n            onClose() {\n              that.$router.push({\n                name:'blank'\n              })\n              Toast({\n                message: that.$t('quickCS'),\n                position:'bottom',\n                duration: 2000,\n              })\n            }\n          });\n        },\n        // 接收平仓回传\n        websocketonmessage3(e){\n          let that = this\n          this.redata = JSON.parse(e.data)\n          console.log(this.redata)\n          if(this.redata.action === 'placeorder'){\n            if(this.redata.data.code === 0){\n\n            }else {\n              Toast.fail({\n                message: that.redata.data.msg,\n                duration: 1000,\n                onClose() {\n                  that.$router.push({\n                    name:'blank'\n                  })\n                }\n              });\n            }\n          }\n          if(this.redata.action === 'notifitrade'  ||this.redata.action === 'notifiorder'){\n            this.tsNum++\n              Toast.loading({\n                message: that.$t('quickC'),\n                mask:true,\n                duration: 0,\n                forbidClick: true,\n                onClose() {\n                  that.$router.push({\n                    name:'blank'\n                  })\n                  Toast({\n                    message: that.$t('quickCS'),\n                    position:'bottom',\n                    duration: 2000,\n                  })\n                }\n              });\n              console.log(that.tsNum)\n              if(that.tsNum >= that.orderList.length){\n                console.log('平仓完成')\n                Toast.clear();\n              }\n          }\n        },\n        // 获取详细订单\n        onopen () { // websocket连接后发送数据(send发送)\n          let actions;\n          let that = this\n          actions = {\n            action: \"loadposition\",\n            reqID: 45,\n            data: {\n              userId : that.uid,\n            },\n          }\n          that.global.ws.send(JSON.stringify(actions))\n        },\n        // 接收详细订单\n        websocketonmessage (e) { // 数据接收\n          this.redata = JSON.parse(e.data)\n          console.log(this.redata)\n          if(this.redata.data.code === 0 && this.redata.data.object != null){\n            for(let i=0,len = this.redata.data.object.length;i<len;i++){\n              if(this.redata.data.object[i].instrumentid === this.$route.params.instrumentid){\n                this.redata.data.object[i].volume = this.redata.data.object[i].volume - this.redata.data.object[i].volumeClosed -this.redata.data.object[i].volumeFrozen\n                this.detailedData.push(this.redata.data.object[i])\n              }\n            }\n          }\n          console.log(this.detailedData)\n\n        },\n        setOrderList(a){\n          if(this.detailedData !== ''){\n            console.log(a,'a')\n            let sarr = a\n            let idx = 0\n            let arr = this.detailedData\n            console.log(arr)\n            this.factorial(arr,sarr,idx)\n          }\n        },\n        factorial(arr,sarr,idx){\n          this.orderList.push(arr[idx])\n          console.log(arr)\n          if(arr[idx].volume >= sarr){\n            return arr[idx].volume\n          }else {\n            return this.factorial(arr,sarr-arr[idx].volume,idx+1)\n          }\n        },\n      }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"../../../style/trade\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/trade/components/quickClosing.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"dialog\"},[_c('div',{staticClass:\"sellOut\"},[_c('van-dialog',{attrs:{\"closeOnPopstate\":\"\",\"show-cancel-button\":\"\",\"cancel-button-text\":_vm.$t('cancel'),\"cancelButtonColor\":\"#8C8B8B\",\"confirmButtonColor\":\"#1988FF\",\"show-confirm-button\":\"\",\"confirm-button-text\":_vm.$t('ConfirmC')},on:{\"cancel\":_vm.CancelClosing,\"confirm\":_vm.ConfirmClosing},model:{value:(_vm.showClosePosition),callback:function ($$v) {_vm.showClosePosition=$$v},expression:\"showClosePosition\"}},[_c('div',{staticClass:\"dia-title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.$t('OrderInform')))]),_vm._v(\" \"),_c('div',{staticClass:\"dia-content\",attrs:{\"slot\":\"default\"},slot:\"default\"},[_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('Name'))+\"：\")]),_vm._v(\" \"),_c('div',{staticClass:\"dia-content-title\"},[_vm._v(_vm._s(_vm.$i18n.locale !== 'zh'?_vm.nameEN:_vm.name))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('code'))+\"：\")]),_vm._v(\" \"),_c('div',{staticClass:\"dia-content-title1\"},[_vm._v(_vm._s(_vm.instrumentid))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('direction'))+\"：\")]),_vm._v(\" \"),_c('div',[_c('span',{style:({color:_vm.directionClose === '买'? '#0CAD6B':'#FD4F50'})},[_vm._v(_vm._s(_vm.directionClose === '买'?_vm.$t('sell'):_vm.$t('buy')))])])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('PL'))+\"($)：\")]),_vm._v(\" \"),_c('div',{style:({color:_vm.NEWCPL<0?'#25B100':'#FE0000'})},[_vm._v(\" \"+_vm._s(_vm.NEWCPL))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('LatestPrice'))+\"：\")]),_vm._v(\" \"),_c('div',{style:({color:_vm.add<0?'#25B100':'#FE0000'})},[_vm._v(_vm._s(_vm.newClose))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('AveragePrice'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.average))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('Qty'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.stepper))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('margin'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.bondClose))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('ServiceCharge'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.serviceChargeClose))])])])])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-269919c2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/trade/components/quickClosing.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-269919c2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./quickClosing.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./quickClosing.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./quickClosing.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-269919c2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./quickClosing.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-269919c2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trade/components/quickClosing.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}