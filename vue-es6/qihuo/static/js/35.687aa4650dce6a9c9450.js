webpackJsonp([35],{"8pC/":function(t,a){},xAwu:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("eqfM");var i=e("/QYm"),n=e("mvHQ"),s=e.n(n),o=e("wc8z"),r=e("cWLO"),c={name:"withdrawal",data:function(){return{discUrl:"",token:"",userId:"",money:"",bankAccount:"",bankIcon:"",bankClass:"",rate:"",Balance:0,preBalance:0,fee:0,serviceCharge:0}},created:function(){this.bank=localStorage.getItem("bank");var t=r.a.decrypt(localStorage.getItem("bankAccount"),"");this.bankAccount=t,this.bankClass=Object(o.a)(t).cardTypeName,this.isDrawPass=localStorage.getItem("isDrawPass"),this.token=localStorage.getItem("token"),this.userId=localStorage.getItem("uid"),this.discUrl=localStorage.getItem("discUrl"),this.getPayment(),this.getLogin()},methods:{getMoney:function(){this.serviceCharge=(this.fee*(this.money/this.rate)).toFixed(2),this.preBalance=(this.money/this.rate).toFixed(2)},getPayment:function(){var t=this;this.$axios.get("http://"+this.discUrl+":7777/api/exchangerate/all").then(function(a){if(0===a.data.code)for(var e=0,i=a.data.object.length;e<i;e++)"CNY"===a.data.object[e].currency&&(t.rate=a.data.object[e].rate)})},getLogin:function(t){var a=this;a.global.ws&&1===a.global.ws.readyState&&(a.global.ws.onopen=a.onopen()),a.global.ws.onmessage=function(t){a.websocketonmessage(t)}},onopen:function(){var t;t={action:"opermoney",reqID:83},this.global.ws.send(s()(t))},websocketonerror:function(){this.getLogin()},websocketonmessage:function(t){this.redata=JSON.parse(t.data),0===this.redata.data.code&&null!=this.redata.data.object&&(this.Balance=this.redata.data.object.balance,this.fee=this.redata.data.object.fee)},CashWithdrawal:function(){this.$router.push({name:"extract",params:{money:this.money}})},setCashWithdrawal:function(){var t;t={action:"outmoney",reqID:84,data:{amount:this.money,drawPass:this.$route.params.oldPass}},this.global.ws.send(s()(t))},getCashWithdrawal:function(t){var a=this;this.redata=JSON.parse(t.data),"outmoney"===this.redata.action&&(0===this.redata.data.code?Object(i.a)({message:"提交成功！",position:"bottom",duration:1e3}):Object(i.a)({message:a.redata.data.msg,position:"bottom",duration:1e3,onClose:function(){a.$router.push({name:"withdrawal"})}}))},linkHome:function(){this.$router.push({name:"my"})},linkWithdrawal:function(){this.$router.push({name:"capitalRecord",params:{tradeTab:2}})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"withdrawal-box"},[e("div",{staticClass:"withdrawal-bar"},[e("van-nav-bar",{attrs:{title:t.$t("withdraw"),"right-text":t.$t("WRecord"),"left-arrow":""},on:{"click-left":t.linkHome,"click-right":t.linkWithdrawal}})],1),t._v(" "),e("div",{staticClass:"withdrawal-name"},[t._v(t._s(t.$t("DebitCard")))]),t._v(" "),e("div",{staticClass:"withdrawal-title"},[e("div",[e("div",[t._v(t._s(t.bank))]),t._v(" "),e("div",[t._v(t._s(t.bankAccount))])])]),t._v(" "),e("div",{staticClass:"withdrawal-content"},[e("div",[t._v(t._s(t.$t("WMoney")))]),t._v(" "),e("div",{staticClass:"withdrawal-input"},[e("van-cell-group",[e("van-field",{attrs:{placeholder:t.$t("KTMoney")+t.Balance},on:{input:t.getMoney},model:{value:t.money,callback:function(a){t.money=a},expression:"money"}},[e("div",{staticClass:"input-icon",attrs:{slot:"left-icon"},slot:"left-icon"},[t._v("$")])])],1)],1)]),t._v(" "),e("div",{staticClass:"withdrawal-but",on:{click:t.CashWithdrawal}},[t._v(t._s(t.$t("withdraw")))]),t._v(" "),e("router-view")],1)},staticRenderFns:[]};var d=e("VU/8")(c,l,!1,function(t){e("8pC/")},"data-v-7cb0fdb2",null);a.default=d.exports}});
//# sourceMappingURL=35.687aa4650dce6a9c9450.js.map