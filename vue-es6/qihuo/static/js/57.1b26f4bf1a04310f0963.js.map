{"version":3,"sources":["webpack:///src/views/my/accountManage/identity.vue","webpack:///./src/views/my/accountManage/identity.vue?2d6d","webpack:///./src/views/my/accountManage/identity.vue"],"names":["identity","name","data","newPass","confirmNewPass","discUrl","idError","inputPasswordError","created","this","localStorage","getItem","methods","linkHome","$router","push","inputButton","Object","verificationId","showBut","inputPassword","value","val","test","linkNewPassword","that","global","ws","readyState","onopen","onmessage","res","websocketonmessage","actions","action","reqID","idCard","password","send","stringify_default","e","redata","JSON","parse","code","toast","fail","message","duration","accountManage_identity","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","left-arrow","on","click-left","_v","label","placeholder","error-message","input","model","callback","$$v","expression","type","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wLAuBAA,GACAC,KAAA,WACAC,KAFA,WAGA,OACAC,QAAA,GACAC,eAAA,GACAC,QAAA,GACAC,QAAA,GACAC,mBAAA,KAGAC,QAXA,WAaAC,KAAAJ,QAAAK,aAAAC,QAAA,YAEAC,SACAC,SADA,WAEAJ,KAAAK,QAAAC,MACAd,KAAA,eAIAe,YAPA,YAQA,IAAAC,OAAAC,EAAA,EAAAD,CAAAR,KAAAN,UACAM,KAAAU,SAAA,EACAV,KAAAH,QAAA,KAEAG,KAAAU,SAAA,EACAV,KAAAH,QAAAW,OAAAC,EAAA,EAAAD,CAAAR,KAAAN,WAGAiB,cAhBA,WAiBA,IAAAC,EAAAZ,KAAAL,eAEAkB,EADA,WACAC,KAAAF,GAIAZ,KAAAF,mBAHAe,EAGA,mBAFA,IAKAE,gBA1BA,WA2BA,IAAAC,EAAAhB,KAEAgB,EAAAC,OAAAC,IAAA,IAAAF,EAAAC,OAAAC,GAAAC,aACAH,EAAAC,OAAAC,GAAAE,OAAAJ,EAAAI,UAEAJ,EAAAC,OAAAC,GAAAG,UAAA,SAAAC,GACAN,EAAAO,mBAAAD,KAGAF,OApCA,WAqCA,IAAAI,EAEAA,GACAC,OAAA,iBACAC,MAAA,GACAjC,MACAkC,OALA3B,KAKAN,QACAkC,SANA5B,KAMAL,iBANAK,KASAiB,OAAAC,GAAAW,KAAAC,IAAAN,KAEAD,mBAjDA,SAiDAQ,GAEA/B,KAAAgC,OAAAC,KAAAC,MAAAH,EAAAtC,MAEA,mBAAAO,KAAAgC,OAAAP,SACA,IAAAzB,KAAAgC,OAAAvC,KAAA0C,KACAnC,KAAAK,QAAAC,MACAd,KAAA,gBAGU4C,EAAA,EAAVC,MACAC,QAAA,SACAC,SAAA,UChGeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA1C,KAAa2C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,eAAoBG,OAAOC,MAAA,QAAAC,aAAA,IAAgCC,IAAKC,aAAAV,EAAAtC,aAA2B,GAAAsC,EAAAW,GAAA,KAAAR,EAAA,OAA4BE,YAAA,UAAoBL,EAAAW,GAAA,8BAAAX,EAAAW,GAAA,KAAAR,EAAA,OAA6DE,YAAA,wBAAkCF,EAAA,kBAAAA,EAAA,aAAuCG,OAAOM,MAAA,QAAAC,YAAA,SAAAC,gBAAAd,EAAA7C,SAAmEsD,IAAKM,MAAAf,EAAAnC,aAAwBmD,OAAQ9C,MAAA8B,EAAA,QAAAiB,SAAA,SAAAC,GAA6ClB,EAAAhD,QAAAkE,GAAgBC,WAAA,aAAuBnB,EAAAW,GAAA,KAAAR,EAAA,aAA8BG,OAAOc,KAAA,WAAAR,MAAA,QAAAC,YAAA,UAAAC,gBAAAd,EAAA5C,oBAAiGqD,IAAKM,MAAAf,EAAA/B,eAA0B+C,OAAQ9C,MAAA8B,EAAA,eAAAiB,SAAA,SAAAC,GAAoDlB,EAAA/C,eAAAiE,GAAuBC,WAAA,qBAA8B,OAAAnB,EAAAW,GAAA,KAAAR,EAAA,OAAgCE,YAAA,SAAAI,IAAyBY,MAAArB,EAAA3B,mBAA6B2B,EAAAW,GAAA,WAEr9BW,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE5E,EACAiD,GATF,EAVA,SAAA4B,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/57.1b26f4bf1a04310f0963.js","sourcesContent":["<template>\n  <div class=\"identity\">\n    <div class=\"record-bar\">\n      <van-nav-bar\n        title=\"更换手机号\"\n        left-arrow\n        @click-left=\"linkHome\"\n      />\n    </div>\n    <div class=\"title\">温馨提示：请输入身份证及登录密码以更换手机号码。</div>\n    <div class=\"content new-content\">\n      <van-cell-group>\n        <van-field  v-model=\"newPass\" label=\"身份证号：\" placeholder=\"请输入身份证\" :error-message=\"idError\" @input=\"inputButton\"/>\n        <van-field type=\"password\" v-model=\"confirmNewPass\" label=\"登录密码：\" placeholder=\"请输入登录密码\"   :error-message=\"inputPasswordError\" @input=\"inputPassword\"/>\n      </van-cell-group>\n    </div>\n    <div class=\"button\" @click=\"linkNewPassword\">验证</div>\n  </div>\n</template>\n\n<script>\n  import {IdentityCodeValid} from '../../../utils/verificationId'\n  import { Toast } from 'vant'\n    export default {\n        name: \"identity\",\n      data(){\n          return{\n            newPass:'',\n            confirmNewPass:'',\n            discUrl:'',\n            idError:'',\n            inputPasswordError:''\n          }\n      },\n      created(){\n          // this.discUrl = '192.168.5.29'\n          this.discUrl = localStorage.getItem('discUrl')\n      },\n      methods:{\n        linkHome(){\n          this.$router.push({\n            name:'bindPhone'\n          })\n        },\n        // 验证身份证\n        inputButton () {\n          if(IdentityCodeValid(this.newPass) === true){\n            this.showBut = true\n            this.idError = ''\n          }else {\n            this.showBut = false\n            this.idError = IdentityCodeValid(this.newPass)\n          }\n        },\n        inputPassword(){\n          let value = this.confirmNewPass\n          let reg =/^ +| +$/g;\n          let val = reg.test(value)\n          if (!val) {\n            this.inputPasswordError = ''\n          } else {\n            this.inputPasswordError = '密码中含有非法字符，请重新输入！'\n          }\n        },\n        linkNewPassword() {\n          let that = this;\n          console.log(that.global.ws)\n          if (that.global.ws && that.global.ws.readyState === 1) {\n            that.global.ws.onopen = that.onopen()\n          }\n          that.global.ws.onmessage = function(res) {\n            that.websocketonmessage (res)\n          };\n        },\n        onopen () { // websocket连接后发送数据(send发送)\n          let actions;\n          let that = this\n          actions = {\n            action: \"identityVerify\",\n            reqID: 77,\n            data: {\n              idCard:that.newPass,\n              password:that.confirmNewPass\n            },\n          }\n          that.global.ws.send(JSON.stringify(actions))\n        },\n        websocketonmessage(e) {\n          let that = this\n          this.redata = JSON.parse(e.data)\n          console.log(this.redata)\n          if(this.redata.action === \"identityVerify\" ){\n            if(this.redata.data.code === 0){\n              this.$router.push({\n                name:'changePhone'\n              })\n            }else {\n              Toast.fail({\n                message:'身份验证失败',\n                duration:1000,\n              })\n            }\n          }\n        }\n      }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"../../../style/my\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my/accountManage/identity.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"identity\"},[_c('div',{staticClass:\"record-bar\"},[_c('van-nav-bar',{attrs:{\"title\":\"更换手机号\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.linkHome}})],1),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(\"温馨提示：请输入身份证及登录密码以更换手机号码。\")]),_vm._v(\" \"),_c('div',{staticClass:\"content new-content\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"身份证号：\",\"placeholder\":\"请输入身份证\",\"error-message\":_vm.idError},on:{\"input\":_vm.inputButton},model:{value:(_vm.newPass),callback:function ($$v) {_vm.newPass=$$v},expression:\"newPass\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"登录密码：\",\"placeholder\":\"请输入登录密码\",\"error-message\":_vm.inputPasswordError},on:{\"input\":_vm.inputPassword},model:{value:(_vm.confirmNewPass),callback:function ($$v) {_vm.confirmNewPass=$$v},expression:\"confirmNewPass\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":_vm.linkNewPassword}},[_vm._v(\"验证\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-276de84c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/my/accountManage/identity.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-276de84c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./identity.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./identity.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./identity.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-276de84c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./identity.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-276de84c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/accountManage/identity.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}