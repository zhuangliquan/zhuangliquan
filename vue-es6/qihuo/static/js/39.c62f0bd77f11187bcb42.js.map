{"version":3,"sources":["webpack:///src/views/trade/components/quickBackhand.vue","webpack:///./src/views/trade/components/quickBackhand.vue?c282","webpack:///./src/views/trade/components/quickBackhand.vue"],"names":["quickBackhand","name","data","discUrl","showSellOut","FixedPriceOff","stepperOne","stepperTwo","add","balance","digits","stopProfit","stopLoss","styleClass","show","instrumentid","uid","newClose","averageClose","bondClose","directionClose","serviceChargeClose","changeContentOff","detailedData","orderList","tsNum","tickCopyData","props","appTick","type","Array","tradeTab","Number","watch","newVal","JSON","parse","localStorage","tickCopy","this","undefined","price","toFixed","preclose","created","routeData","$route","params","positionid","userid","nameEN","average","getItem","MaxVolume","stepper","margin","commission","handdleMsg","closePosi","methods","CancelClosing","that","global","ws","readyState","onopen","setPlaceOrder2","onmessage","res","getPlaceOrder2","actions","direction","action","reqID","id","settlementid","source","orderRef","ordersysid","volume","volumeTraded","priceType","limitPrice","distanceStopPrice","distanceProfitPrice","status","closed","frozenMargin","frozenMarginMember","tradingDay","createtime","updatetime","canceltime","hedge","hedgeChannel","distanceStop","distanceProfit","send","stringify_default","e","redata","code","Object","toast","message","$t","duration","position","onClose","$router","push","fail","msg","noShowSheet","$emit","removeItem","balanceTimeData","websocketonmessage","object","ConfirmClosing","_this","onopen3","websocketonmessage3","setClosePosi","getClosePosi","setOrderList","diff","length","sum","i","len","loading","mask","forbidClick","clear","userId","volumeClosed","volumeFrozen","a","sarr","arr","factorial","idx","components_quickBackhand","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","closeOnPopstate","show-cancel-button","cancel-button-text","show-confirm-button","confirm-button-text","cancelButtonColor","confirmButtonColor","on","cancel","confirm","model","value","callback","$$v","expression","slot","_v","_s","$i18n","locale","style","color","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/39.c62f0bd77f11187bcb42.js","sourcesContent":["<template>\n  <div class=\"dialog\">\n    <div class=\"sellOut\">\n      <van-dialog\n        closeOnPopstate\n        v-model=\"showSellOut\"\n        show-cancel-button\n        :cancel-button-text=\"$t('cancel')\"\n        show-confirm-button\n        :confirm-button-text=\"$t('ConfirmB')\"\n        cancelButtonColor=\"#8C8B8B\"\n        confirmButtonColor=\"#1988FF\"\n        @cancel=\"noShowSheet\"\n        @confirm=\"ConfirmClosing\"\n      >\n        <div slot=\"title\" class=\"dia-title\">{{$t('OrderInform')}}</div>\n        <div slot=\"default\" class=\"dia-content\">\n          <div>\n            <div>{{$t('Name')}}：</div>\n            <div class=\"dia-content-title\">{{$i18n.locale !== 'zh'?nameEN:name}}</div>\n          </div>\n          <div>\n            <div>{{$t('code')}}：</div>\n            <div class=\"dia-content-title1\">{{instrumentid}}</div>\n          </div>\n          <div v-if=\"FixedPriceOff\">\n            <div>{{$t('marketPrice')}}：</div>\n            <div :style=\"{color:add<0?'#25B100':'#FE0000'}\">{{newClose}}</div>\n          </div>\n          <div v-else>\n            <div>{{$t('FixedPrice')}}：</div>\n            <div>{{stepperTwo}}</div>\n          </div>\n          <div>\n            <div>{{$t('Number')}}：</div>\n            <div>{{stepperOne}}</div>\n          </div>\n          <div>\n            <div>{{$t('direction')}}：</div>\n            <div><span :style=\"{color:directionClose === '买'? '#FD4F50':'#0CAD6B'}\">{{directionClose === '买'?$t('buy'):$t('sell')}}</span></div>\n          </div>\n          <div>\n            <div>{{$t('margin')}}</div>\n            <div>{{bondClose}}</div>\n          </div>\n          <div>\n            <div>{{$t('ServiceCharge')}}：</div>\n            <div>{{serviceChargeClose}}</div>\n          </div>\n          <div>\n            <div>{{$t('balance')}}：</div>\n            <div>{{balance}}</div>\n          </div>\n        </div>\n      </van-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { Toast } from 'vant';\n  export default {\n    name: \"quickBackhand\",\n    data(){\n      return{\n        discUrl:'',\n        showSellOut:true,\n        FixedPriceOff:true,\n        name:'11',\n        stepperOne:0,\n        stepperTwo:1,\n        add:0,\n        balance:0,\n        digits:0,\n        // 传给父组件的值\n        stopProfit:'11',\n        stopLoss:'1000',\n        styleClass: 'start',\n        show:false,\n        instrumentid:'',\n        // 用户id\n        uid:'',\n        newClose:0,\n        averageClose:0,\n        bondClose:0,\n        directionClose:0,\n        serviceChargeClose:0,\n        changeContentOff:true,\n        // 详细订单\n        detailedData:[],\n        // 存放订单号\n        orderList:[],\n        tsNum:0,\n        tickCopyData:''\n      }\n    },\n    props:{\n      appTick:{\n        type:Array,\n      },\n      tradeTab:{\n        type:Number\n      }\n    },\n    watch:{\n      appTick(newVal){\n        if(JSON.parse(localStorage.tickCopy) !== ''){\n          this.tickCopyData = JSON.parse(localStorage.tickCopy)\n        }\n        if(this.tickCopyData[this.instrumentid] !== undefined){\n          let data = this.tickCopyData[this.instrumentid]\n          this.newClose = (data.price).toFixed(this.digits)\n          this.add = (data.price-data.preclose).toFixed(this.digits)\n        }\n      },\n    },\n    created(){\n      let routeData = this.$route.params\n      this.instrumentid = routeData.instrumentid\n      this.digits = routeData.digits\n      this.positionid = this.$route.params.positionid\n      this.uid = this.$route.params.userid\n      this.name = routeData.name\n      this.nameEN = routeData.nameEN\n      console.log(routeData,'routeData')\n      this.averageClose = this.$route.params.average\n      let directionClose = this.$route.params.directionClose\n      if(directionClose === '买'){\n        this.directionClose = '卖'\n      }else if(directionClose === '卖'){\n        this.directionClose = '买'\n      }\n      let tickCopy = JSON.parse(localStorage.getItem('tickCopy'))\n      let tickCopyData = tickCopy[this.instrumentid]\n      console.log(tickCopy[this.instrumentid])\n      this.newClose = (tickCopyData.price).toFixed(this.digits)\n      this.add = (tickCopyData.price-tickCopyData.preclose).toFixed(this.digits)\n      this.stepperOne = this.$route.params.MaxVolume\n      this.stepper = this.stepperOne\n      console.log(this.stepper)\n      this.bondClose = this.$route.params.margin\n      this.serviceChargeClose = this.$route.params.commission\n      this.handdleMsg()\n      this.closePosi()\n    },\n    methods:{\n      CancelClosing(){\n        let that = this\n        if (that.global.ws && that.global.ws.readyState == 1) {\n          this.global.ws.onopen = this.setPlaceOrder2()\n        }\n        that.global.ws.onmessage = function(res) {\n          that.getPlaceOrder2 (res)\n        };\n      },\n      setPlaceOrder2(){\n        let actions;\n        let that = this;\n        let direction\n        if(this.directionClose === '买'){\n          direction = 0\n        }else if(this.directionClose === '卖'){\n          direction = 1\n        }\n        actions = {\n          \"action\":\"placeorder\",\n          \"reqID\":104,\n          \"data\":{\n            \"id\":null,\n            \"userid\":null,\n            \"settlementid\":null,\n            \"source\":null,\n            \"type\":0,\n            \"positionid\":null,\n            \"instrumentid\":that.instrumentid,\n            \"orderRef\":\"b321ecab-d67d-450c-b2bb-b8caa233877d\",\n            \"ordersysid\":null,\n            \"direction\":direction,\n            \"volume\":that.stepperOne,\n            \"volumeTraded\":null,\n            \"priceType\":1,\n            \"limitPrice\":that.stepperTwo,\n            \"distanceStopPrice\":null,\n            \"distanceProfitPrice\":null,\n            \"status\":null,\n            \"closed\":null,\n            \"frozenMargin\":null,\n            \"frozenMarginMember\":null,\n            \"tradingDay\":null,\n            \"createtime\":null,\n            \"updatetime\":null,\n            \"canceltime\":null,\n            \"hedge\":null,\n            \"hedgeChannel\":null,\n            \"distanceStop\":0.0,\n            \"distanceProfit\":0.0\n          }};\n        that.global.ws.send(JSON.stringify(actions));\n      },\n      getPlaceOrder2(e){\n        let that = this\n        this.redata = JSON.parse(e.data)\n        console.log(this.redata)\n        if(this.redata.action === \"placeorder\"){\n          if(this.redata.data.code === 0){\n            Toast({\n              message: that.$t('BHTMessage'),\n              duration: 1000,\n              position:'bottom',\n              onClose() {\n                that.$router.push({\n                  name:'blank'\n                })\n              }\n            });\n          }else {\n            Toast.fail({\n              message: this.redata.data.msg,\n              duration: 1000,\n              position:'bottom',\n              onClose() {\n                that.$router.push({\n                  name:'blank'\n                })\n              }\n            });\n          }\n        }\n      },\n      // 关闭上拉框\n      noShowSheet () {\n        this.$router.push({\n          name:'trade',\n        })\n        this.$emit('contentStyle',this.styleClass,this.show);\n        localStorage.removeItem('positionid')\n        localStorage.removeItem('upTitle')\n      },\n\n      // 获取余额\n      handdleMsg(msg) {\n        console.log(656565)\n        let that = this;\n        if (that.global.ws && that.global.ws.readyState == 1) {\n          that.balanceTimeData()\n        }\n        that.global.ws.onmessage = function(res) {\n          that.websocketonmessage (res)\n        };\n      },\n      // 查询余额计时器\n      balanceTimeData(){\n        this.global.ws.onopen = this.onopen()\n      },\n      // 发送余额data\n      onopen () { // websocket连接后发送数据(send发送)\n        let actions;\n        let that = this\n        actions = {\n          action: \"loadusermoney\",\n          reqID: 17,\n        }\n        that.global.ws.send(JSON.stringify(actions))\n      },\n      // 接收余额data\n      websocketonmessage (e) { // 数据接收\n        this.redata = JSON.parse(e.data)\n        console.log(this.redata)\n        if(this.redata.data.code === 0 && this.redata.action === \"loadusermoney\"){\n          this.balance = this.redata.data.object.balance\n        }\n      },\n\n\n      // 确认平仓\n      ConfirmClosing(){\n        let _this = this\n        this.global.ws.onopen = this.onopen3()\n        this.global.ws.onmessage = function(res) {\n          _this.websocketonmessage3 (res)\n        };\n      },\n      // 提交平仓\n      closePosi(msg) {\n        let that = this;\n        if (that.global.ws && that.global.ws.readyState == 1) {\n          that.global.ws.onopen = that.setClosePosi()\n        }\n        that.global.ws.onmessage = function(res) {\n          that.getClosePosi (res)\n        };\n      },\n      onopen3 () { // websocket连接后发送数据(send发送)\n        this.setOrderList(this.stepper)\n        let balance,direction;\n        let that = this\n        let diff = that.stepper\n        if(this.directionClose === '买'){\n          direction = 0\n        }else if(this.directionClose === '卖'){\n          direction = 1\n        }\n        console.log(this.orderList)\n        if(this.orderList.length<=1){\n          balance = {\n            action: \"placeorder\",\n            reqID: 34,\n            data: {\n              id: null,\n              userid: that.uid,\n              settlementid: null,\n              source: null,\n              type: 1,\n              positionid: that.positionid[0],\n              instrumentid: that.instrumentid,\n              orderRef: \"9f538075-fff6-4e84-9fee-505ce91fecf6\",\n              ordersysid: null,\n              direction: direction,\n              volume: that.stepper,\n              volumeTraded: null,\n              priceType: 1,\n              limitPrice: 0,\n              distanceStopPrice: null,\n              distanceProfitPrice: null,\n              status: null,\n              closed: null,\n              frozenMargin: null,\n              frozenMarginMember: null,\n              tradingDay: null,\n              createtime: null,\n              updatetime: null,\n              canceltime: null,\n              hedge: null,\n              hedgeChannel: null,\n              distanceStop: 0.0,\n              distanceProfit: 0.0\n            }\n          }\n          that.global.ws.send(JSON.stringify(balance))\n        }else {\n          let sum = 0\n          for (let i=0,len = this.orderList.length;i<len;i++){\n            balance = {\n              action: \"placeorder\",\n              reqID: 34,\n              data: {\n                id: null,\n                userid: that.uid,\n                settlementid: null,\n                source: null,\n                type: 1,\n                positionid: that.orderList[i].id,\n                instrumentid: that.instrumentid,\n                orderRef: \"9f538075-fff6-4e84-9fee-505ce91fecf6\",\n                ordersysid: null,\n                direction: direction,\n                volume: that.orderList[i].volume,\n                volumeTraded: null,\n                priceType: 1,\n                limitPrice: 0,\n                distanceStopPrice: null,\n                distanceProfitPrice: null,\n                status: null,\n                closed: null,\n                frozenMargin: null,\n                frozenMarginMember: null,\n                tradingDay: null,\n                createtime: null,\n                updatetime: null,\n                canceltime: null,\n                hedge: null,\n                hedgeChannel: null,\n                distanceStop: 0.0,\n                distanceProfit: 0.0\n              }\n            }\n            if(i<this.orderList.length-1){\n              sum = sum + this.orderList[i].volume\n            }\n            if(i === this.orderList.length-1){\n              balance = {\n                action: \"placeorder\",\n                reqID: 34,\n                data: {\n                  id: null,\n                  userid: this.uid,\n                  settlementid: null,\n                  source: null,\n                  type: 1,\n                  positionid: that.orderList[i].id,\n                  instrumentid: this.instrumentid,\n                  orderRef: \"9f538075-fff6-4e84-9fee-505ce91fecf6\",\n                  ordersysid: null,\n                  direction: direction,\n                  volume: diff-sum,\n                  volumeTraded: null,\n                  priceType: 1,\n                  limitPrice: 0,\n                  distanceStopPrice: null,\n                  distanceProfitPrice: null,\n                  status: null,\n                  closed: null,\n                  frozenMargin: null,\n                  frozenMarginMember: null,\n                  tradingDay: null,\n                  createtime: null,\n                  updatetime: null,\n                  canceltime: null,\n                  hedge: null,\n                  hedgeChannel: null,\n                  distanceStop: 0.0,\n                  distanceProfit: 0.0\n                }\n              }\n            }\n            that.global.ws.send(JSON.stringify(balance))\n          }\n        }\n        Toast.loading({\n          message: that.$t('BHTMessage1'),\n          duration: 0,\n          mask:true,\n          forbidClick: true,\n          onClose() {\n            that.$router.push({\n              name:'blank'\n            })\n          }\n        });\n      },\n      // 接收平仓回传\n      websocketonmessage3(e){\n        let that = this\n        this.redata = JSON.parse(e.data)\n        console.log(this.redata,'1111')\n        if(this.redata.action === 'placeorder'){\n          if(this.redata.data.code === 0){\n            that.CancelClosing()\n          }else {\n            Toast.fail({\n              message: that.redata.data.msg,\n              duration: 1000,\n              onClose() {\n                that.$router.push({\n                  name:'blank'\n                })\n              }\n            });\n          }\n        }\n        if(this.redata.action === 'notifitrade' ||this.redata.action === 'notifiorder'){\n          console.log(this.redata)\n          this.tsNum++\n          console.log(that.tsNum)\n          if(that.tsNum >= that.orderList.length){\n            console.log('平仓完成')\n            Toast.clear();\n          }\n        }\n      },\n      // 获取详细订单\n      setClosePosi () { // websocket连接后发送数据(send发送)\n        let actions;\n        let that = this\n        actions = {\n          action: \"loadposition\",\n          reqID: 45,\n          data: {\n            userId : that.uid,\n          },\n        }\n        that.global.ws.send(JSON.stringify(actions))\n      },\n      // 接收详细订单\n      getClosePosi (e) { // 数据接收\n        this.redata = JSON.parse(e.data)\n        console.log(this.redata)\n        if(this.redata.action === \"notifitrade\" && this.redata.data != null){\n          this.$router.push({\n            name:'blank'\n          })\n        }\n        if(this.redata.data.code === 0 && this.redata.action === \"loadusermoney\"){\n          this.balance = this.redata.data.object.balance\n        }\n        if(this.redata.action === \"loadposition\" && this.redata.data.code === 0 && this.redata.data.object != null){\n          for(let i=0,len = this.redata.data.object.length;i<len;i++){\n            if(this.instrumentid === this.redata.data.object[i].instrumentid){\n              console.log(this.redata.data.object[i])\n              this.redata.data.object[i].volume = this.redata.data.object[i].volume - this.redata.data.object[i].volumeClosed -this.redata.data.object[i].volumeFrozen\n              this.detailedData.push(this.redata.data.object[i])\n            }\n          }\n        }\n\n      },\n      setOrderList(a){\n        let sarr = a\n        let idx = 0\n        let arr = this.detailedData\n        this.factorial(arr,sarr,idx)\n      },\n      factorial(arr,sarr,idx){\n\n\n        this.orderList.push(arr[idx])\n        if(arr[idx].volume >= sarr){\n          return arr[idx].volume\n        }else {\n          return this.factorial(arr,sarr-arr[idx].volume,idx+1)\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"../../../style/trade\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/trade/components/quickBackhand.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dialog\"},[_c('div',{staticClass:\"sellOut\"},[_c('van-dialog',{attrs:{\"closeOnPopstate\":\"\",\"show-cancel-button\":\"\",\"cancel-button-text\":_vm.$t('cancel'),\"show-confirm-button\":\"\",\"confirm-button-text\":_vm.$t('ConfirmB'),\"cancelButtonColor\":\"#8C8B8B\",\"confirmButtonColor\":\"#1988FF\"},on:{\"cancel\":_vm.noShowSheet,\"confirm\":_vm.ConfirmClosing},model:{value:(_vm.showSellOut),callback:function ($$v) {_vm.showSellOut=$$v},expression:\"showSellOut\"}},[_c('div',{staticClass:\"dia-title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.$t('OrderInform')))]),_vm._v(\" \"),_c('div',{staticClass:\"dia-content\",attrs:{\"slot\":\"default\"},slot:\"default\"},[_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('Name'))+\"：\")]),_vm._v(\" \"),_c('div',{staticClass:\"dia-content-title\"},[_vm._v(_vm._s(_vm.$i18n.locale !== 'zh'?_vm.nameEN:_vm.name))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('code'))+\"：\")]),_vm._v(\" \"),_c('div',{staticClass:\"dia-content-title1\"},[_vm._v(_vm._s(_vm.instrumentid))])]),_vm._v(\" \"),(_vm.FixedPriceOff)?_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('marketPrice'))+\"：\")]),_vm._v(\" \"),_c('div',{style:({color:_vm.add<0?'#25B100':'#FE0000'})},[_vm._v(_vm._s(_vm.newClose))])]):_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('FixedPrice'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.stepperTwo))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('Number'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.stepperOne))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('direction'))+\"：\")]),_vm._v(\" \"),_c('div',[_c('span',{style:({color:_vm.directionClose === '买'? '#FD4F50':'#0CAD6B'})},[_vm._v(_vm._s(_vm.directionClose === '买'?_vm.$t('buy'):_vm.$t('sell')))])])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('margin')))]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.bondClose))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('ServiceCharge'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.serviceChargeClose))])]),_vm._v(\" \"),_c('div',[_c('div',[_vm._v(_vm._s(_vm.$t('balance'))+\"：\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.balance))])])])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-758d7c97\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/trade/components/quickBackhand.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-758d7c97\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./quickBackhand.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./quickBackhand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./quickBackhand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-758d7c97\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./quickBackhand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-758d7c97\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trade/components/quickBackhand.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}