webpackJsonp([22],{"14go":function(e,t){},"7YgM":function(e,t){e.exports={name:"hbsw",version:"2.1.4",description:"hc",author:"hc",private:!0,scripts:{dev:"webpack-dev-server --inline --progress --host 0.0.0.0 --config build/webpack.dev.conf.js",start:"npm run dev",lint:"eslint --ext .js,.vue src",build:"node build/build.js"},dependencies:{axios:"^0.19.0","better-scroll":"^1.15.2","blueimp-md5":"^2.10.0",clipboard:"^2.0.4",echarts:"^3.8.5","exif-js":"^2.3.0",jquery:"^3.3.1",pako:"^1.0.10",qs:"^6.9.0","sass-resources-loader":"^2.0.1",vant:"^2.10.7",vue:"^2.5.2","vue-i18n":"^8.21.1","vue-native-websocket":"^2.0.13","vue-qr":"^2.2.1","vue-router":"^3.0.7",vuex:"^3.1.1"},devDependencies:{autoprefixer:"^7.1.2","babel-core":"^6.22.1","babel-eslint":"^8.2.1","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.1","babel-plugin-import":"^1.12.1","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.5.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0",chalk:"^2.0.1","copy-webpack-plugin":"^4.0.1","crypto-js":"^3.1.9-1","css-loader":"^0.28.0",eslint:"^4.15.0","eslint-config-standard":"^10.2.1","eslint-friendly-formatter":"^3.0.0","eslint-loader":"^1.7.1","eslint-plugin-import":"^2.7.0","eslint-plugin-node":"^5.2.0","eslint-plugin-promise":"^3.4.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.0.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.4","friendly-errors-webpack-plugin":"^1.6.1","html-webpack-plugin":"^2.30.1","node-notifier":"^5.1.2","node-sass":"^4.14.1","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.2.0",portfinder:"^1.0.13","postcss-import":"^11.0.0","postcss-loader":"^2.0.8","postcss-url":"^7.2.1",rimraf:"^2.6.0","sass-loader":"^7.1.0",semver:"^5.3.0",shelljs:"^0.7.6","uglifyjs-webpack-plugin":"^1.1.1","url-loader":"^0.5.8","vue-loader":"^13.3.0","vue-style-loader":"^3.0.1","vue-template-compiler":"^2.5.2",webpack:"^3.6.0","webpack-bundle-analyzer":"^2.9.0","webpack-dev-server":"^2.9.1","webpack-merge":"^4.1.0"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},LOb5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),n=o.n(a),s=(o("eqfM"),o("/QYm")),r=o("cWLO"),i=(o("3Lce"),o("7YgM"),{name:"login",data:function(){return{stopAccount:!1,stopPassword:!1,account:"",accountError:"",Password:"",inputPasswordError:"",code:"",inputCodeError:"",accountTips:"",PasswordShow:!0,codeShow:!1,loginMode:"验证码登录",loginModeOff:!1,RememberPW:!1,statement:!0,attcode:!0,showbtn:!0,code_ts:"获取验证码",sec:60,websock:null,keying:"",signIn:!1,discUrl:"",heartCheck:{},webscoketFlag:!0,sendTime:null,disCode:!0,placeCode:"请点击获取短信验证码",getInfo:"",uuid:"",loginType:0,showLanguage:!1,languageRadio:"zh"}},watch:{account:function(e){var t=/\b1[3456789]\d{9}\b/g.test(e);this.attcode=!t}},beforeDestroy:function(){this.sandTime&&clearInterval(this.sandTime)},beforeRouteEnter:function(e,t,o){o(function(e){"home"!==t.name&&"market"!==t.name&&"trade"!==t.name&&"my"!==t.name||e.Logout()})},created:function(){localStorage.setItem("back","signIn"),this.languageRadio=localStorage.i18n,"isLogin"===localStorage.getItem("Flag")&&void 0!==localStorage.account&&(location.reload(),localStorage.removeItem("Flag"),localStorage.removeItem("account")),localStorage.getItem("error")&&(location.reload(),localStorage.removeItem("error")),this.generateUUID(),localStorage.setItem("abnormal","true"),this.discUrl=localStorage.getItem("discUrl");var e=JSON.parse(localStorage.getItem("remember"));"reality"===e.environment?(this.account=e.LoginAccount,!0===e.RememberPW&&(this.RememberPW=!0,this.Password=r.a.decrypt(e.pass,""))):this.account=this.$route.params.phone,this.global.ws&&1!==this.global.ws.readyState&&this.$emit("reLogin","121212")},methods:{getUserIP:function(e){var t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),o=function(){},a={},n=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g,s=function(t){a[t]||e(t),a[t]=!0};t.createDataChannel(""),t.createOffer().then(function(e){e.sdp.split("\n").forEach(function(e){e.indexOf("candidate")<0||e.match(n).forEach(s)}),t.setLocalDescription(e,o,o)}).catch(function(e){}),t.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.match(n)&&e.candidate.candidate.match(n).forEach(s)}},generateUUID:function(){var e=(new Date).getTime();this.uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)}),localStorage.setItem("uuid",this.uuid)},getAgree:function(e){this.statement=e},linkUserAgre:function(){this.$router.push({name:"userAgre"})},clickCode:function(){this.showbtn&&""===this.code&&Object(s.a)({duration:1e3,position:"bottom",message:"请先获取手机验证码"})},fun:function(){},inputAccount:function(){var e=this.account,t=/[a-zA-Z0-9_]$/g.test(e);this.accountError=t?"":this.$t("accountError")},inputCode:function(){var e=this.code,t=/^\d{5}$/g.test(e);this.inputCodeError=t?"":"验证码输入有误，请重新确认！"},inputPassword:function(){var e=this.Password,t=/^ +| +$/g.test(e);this.inputPasswordError=t?this.$t("inputPasswordError"):""},setLoginMode:function(){this.loginModeOff?(this.loginMode="验证码登录",this.accountTips=this.$t("EnterAccount"),this.PasswordShow=!0,this.codeShow=!1):(this.accountTips=this.$t("EnterPhone"),this.loginMode="密码登录",this.PasswordShow=!1,this.codeShow=!0),this.loginModeOff=!this.loginModeOff},linkOpenAccount:function(){this.$router.push({name:"openAccount"})},ForgetPassword:function(){var e=this.account,t=/\b1[3456789]\d{9}\b/g.test(e);!0===t?this.$router.push({name:"changePassword",params:{phone:e}}):this.$router.push({name:"changePassword"})},getyzcode:function(){var e=this,t=this;this.disCode=!1,this.placeCode="请输入短信验证码",this.$axios.get("http://"+this.discUrl+":7777/api/user/sms/"+this.account).then(function(o){if(0===o.data.code&&null!=o.data.object){t.$refs.code.focus(),Object(s.a)({duration:1e3,position:"bottom",message:"验证码发送成功"}),e.keying=o.data.object.keying;var a=setInterval(function(){e.sec=e.sec-1,e.code_ts=e.sec+"S后重试",e.showbtn=!1,0===e.sec&&(clearInterval(a),e.sec=60,e.code_ts=e.sec+"S后重试",e.showbtn=!0)},1e3)}else Object(s.a)({duration:1e3,position:"bottom",message:"验证码发送失败"})})},handdleMsg:function(e){var t=this,o=/\b1[3456789]\d{9}\b/g.test(t.account);this.loginType=o?1:0,t.global.ws&&1===t.global.ws.readyState?t.global.ws.onopen=t.onopen():(this.$emit("reLogin","121212"),this.$toast({message:"登录失败,请检查当前网络",duration:2e3})),t.global.ws.onmessage=function(e){t.websocketonmessage(e)}},websocketonmessage:function(e){this.redata=JSON.parse(e.data);var t=this;if("mutipointlogin"===this.redata.action&&(localStorage.setItem("WhetherReconnect",!0),Object(s.a)({message:t.$t("jixMessage"),position:"bottom",duration:2e3,onOpened:function(){localStorage.jix="jix",t.Logout()}})),"login"===this.redata.action)if(0===this.redata.data.code){localStorage.removeItem("abnormal");var o=r.a.encrypt(t.redata.data.object.bankAccount,""),a=r.a.encrypt(t.redata.data.object.idcard,"");localStorage.setItem("Flag","isLogin"),localStorage.setItem("name",t.redata.data.object.name),localStorage.setItem("phone",t.redata.data.object.phone),localStorage.setItem("account",t.redata.data.object.account),localStorage.setItem("idcard",a),localStorage.setItem("idcardtype",t.redata.data.object.idcardtype),localStorage.setItem("bank",t.redata.data.object.bank),localStorage.setItem("bankAccount",o),localStorage.setItem("uid",t.redata.data.object.id),localStorage.setItem("status",t.redata.data.object.status),localStorage.setItem("token",t.redata.data.object.token),localStorage.setItem("isDrawPass",t.redata.data.object.isDrawPass);var i=r.a.encrypt(t.redata.data.object.discount,"");if(localStorage.setItem("discount",i),localStorage.remember?(localStorage.removeItem("Logout"),localStorage.removeItem("error"),localStorage.removeItem("jix"),this.$router.replace({name:"home",params:{status:this.redata.data.object.status}})):(localStorage.removeItem("Logout"),localStorage.removeItem("error"),localStorage.removeItem("jix"),this.$router.replace({name:"home",params:{showRisk:"1"}})),this.loginModeOff){localStorage.setItem("LoginAccount",this.account),localStorage.setItem("LoginCode",this.code),localStorage.setItem("LoginKeying",this.keying),localStorage.setItem("LoginMode","codeLogin");var c={};c.LoginAccount=this.account,c.environment=localStorage.getItem("environment"),localStorage.setItem("remember",n()(c))}else{var l=r.a.encrypt(this.Password,"");localStorage.setItem("LoginAccount",this.account),localStorage.setItem("LoginPassword",l),localStorage.setItem("LoginMode","passLogin");var d={};d.LoginAccount=this.account,d.RememberPW=this.RememberPW,d.pass=l,d.environment=localStorage.getItem("environment"),localStorage.setItem("remember",n()(d))}}else{var g="",u=t.redata.data.msg;g="用户已登录"===u?this.$t("loginMsg3"):"用户不存在"===u?this.$t("loginMsg1"):"账号或密码错误！"===u?this.$t("loginMsg4"):this.$t("loginMsg2"),Object(s.a)({position:"bottom",message:g,duration:2e3})}},onopen:function(){var e=void 0;this.loginModeOff?""===this.code?Object(s.a)({message:"验证码不能为空",duration:1e3,position:"bottom"}):e={action:"login",reqID:8,data:{loginType:2,account:"",password:"",phone:this.account,loginMac:localStorage.uuid,client:"Mobile",version:localStorage.getInfo,keying:this.keying,code:this.code,reconnection:!1}}:(0===this.loginType&&(e={action:"login",reqID:7,data:{loginType:0,phone:"",account:this.account,password:this.Password,loginMac:localStorage.uuid,client:"Mobile",version:localStorage.getInfo,keying:"",code:"",reconnection:!1}}),1===this.loginType&&(e={action:"login",reqID:7,data:{loginType:1,phone:this.account,account:"",password:this.Password,loginMac:localStorage.uuid,client:"Mobile",version:localStorage.getInfo,keying:"",code:"",reconnection:!1}})),this.global.ws.send(n()(e))},websocketonerror:function(){this.getLogin()},linkLogout:function(){var e=this;e.global.ws&&1===e.global.ws.readyState&&(e.global.ws.onopen=e.open2()),e.global.ws.onmessage=function(t){e.message2(t)}},open2:function(){var e;e={action:"logout",reqID:99,data:{}},this.global.ws.send(n()(e))},message2:function(e){this.redata=JSON.parse(e.data),"logout"===this.redata.action&&0===this.redata.data.code&&(this.$store.commit("userStatus","false"),localStorage.setItem("discUrl","47.74.187.199"),localStorage.removeItem("Flag"),localStorage.removeItem("name"),localStorage.removeItem("account"),localStorage.removeItem("uid"),localStorage.removeItem("status"),localStorage.removeItem("phone"),localStorage.removeItem("disc"),localStorage.removeItem("idcard"),localStorage.removeItem("idcardtype"),localStorage.removeItem("bank"),localStorage.removeItem("bankAccount"),localStorage.removeItem("isDrawPass"),localStorage.removeItem("token"),localStorage.removeItem("upTitle"),localStorage.removeItem("positionid"),localStorage.removeItem("LoginCode"),localStorage.removeItem("LoginKeying"),localStorage.removeItem("LoginPassword"),localStorage.removeItem("LoginMode"),this.$router.replace("/"),this.global.ws.close())},setLanguage:function(){this.showLanguage=!0},confirmLanguage:function(){"zh"===this.languageRadio?(localStorage.setItem("i18n","zh"),this.$i18n.locale="zh"):"en"===this.languageRadio?(localStorage.setItem("i18n","en"),this.$i18n.locale="en"):"ja"===this.languageRadio&&(localStorage.setItem("i18n","ja"),this.$i18n.locale="ja")}}}),c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"signIn"},[o("div",{staticClass:"login-img"}),e._v(" "),o("div",{staticClass:"upData-input phone-error"},[o("van-cell-group",[o("van-field",{ref:"account",attrs:{placeholder:e.$t("EnterAccount"),"error-message":e.accountError,disabled:e.stopAccount},on:{input:e.inputAccount},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),e._v(" "),e.PasswordShow?o("van-field",{ref:"password",staticClass:"forget-password",attrs:{disabled:e.stopPassword,type:"password",placeholder:e.$t("Password"),"error-message":e.inputPasswordError},on:{input:e.inputPassword},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}}):e._e(),e._v(" "),e.codeShow?o("van-field",{ref:"code",staticClass:"forget-password1",attrs:{disabled:e.disCode,placeholder:e.placeCode,"error-message":e.inputCodeError},on:{input:e.inputCode,click:e.clickCode},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[e.showbtn?o("van-button",{staticClass:"code",attrs:{slot:"button",disabled:e.attcode},on:{click:function(t){return t.stopPropagation(),e.getyzcode(t)}},slot:"button"},[e._v(e._s(e.$t("getCode")))]):o("van-button",{staticClass:"code",attrs:{slot:"button"},slot:"button"},[e._v(e._s(e.code_ts))])],1):e._e()],1)],1),e._v(" "),e.loginModeOff?o("div",{staticClass:"upBankCard-statement pass"}):o("div",{staticClass:"upBankCard-statement pass"},[o("van-checkbox",{attrs:{shape:"square","checked-color":"#1988FF"},model:{value:e.RememberPW,callback:function(t){e.RememberPW=t},expression:"RememberPW"}},[e._v(e._s(e.$t("RememberPass")))])],1),e._v(" "),o("van-button",{staticClass:"upBankCard-but",attrs:{disabled:!e.statement},on:{click:e.handdleMsg}},[e._v(e._s(e.$t("SignIn")))]),e._v(" "),o("div",{staticClass:"input-switch",style:{"justify-content":"zh"!==e.$i18n.locale?"center":"space-between"}},[o("div",{on:{click:e.linkOpenAccount}},[e._v("\n      "+e._s(e.$t("logonAsk"))),o("span",{staticStyle:{color:"#1988ff"}},[e._v(e._s(e.$t("register")))])]),e._v(" "),o("div",{staticStyle:{color:"#1988ff"},style:{"margin-top":"zh"!==e.$i18n.locale?"6px":""},on:{click:e.setLanguage}},[e._v("\n      "+e._s(e.$t("language"))+"\n    ")])]),e._v(" "),o("div",{staticClass:"upBankCard-statement",class:"zh"!==e.$i18n.locale?"upBankCard-statement-en":""},[o("div",{staticClass:"upBankCard-statement-box"},[o("van-checkbox",{attrs:{shape:"square","checked-color":"#1988FF"},model:{value:e.statement,callback:function(t){e.statement=t},expression:"statement"}},[e._v(e._s(e.$t("Agreement"))),o("span",{staticStyle:{color:"#1988ff"},on:{click:e.linkUserAgre}},[e._v(e._s(e.$t("AgreementContent")))])])],1)]),e._v(" "),o("van-dialog",{attrs:{"confirm-button-color":"#1988FF",title:e.$t("language"),"confirm-button-text":e.$t("Confirm"),className:"setLanguage"},on:{confirm:e.confirmLanguage},model:{value:e.showLanguage,callback:function(t){e.showLanguage=t},expression:"showLanguage"}},[o("van-radio-group",{model:{value:e.languageRadio,callback:function(t){e.languageRadio=t},expression:"languageRadio"}},[o("van-radio",{attrs:{name:"zh"}},[e._v("简体中文")]),e._v(" "),o("van-radio",{attrs:{name:"en"}},[e._v("English")]),e._v(" "),o("van-radio",{attrs:{name:"ja"}},[e._v("日本語")])],1)],1),e._v(" "),o("router-view",{on:{setAgree:e.getAgree}})],1)},staticRenderFns:[]};var l=o("VU/8")(i,c,!1,function(e){o("14go")},"data-v-5debe867",null);t.default=l.exports}});
//# sourceMappingURL=22.6bbf0a0273992c7b739f.js.map