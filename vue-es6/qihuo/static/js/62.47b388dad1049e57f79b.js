webpackJsonp([62],{NgYs:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("eqfM");var s=i("/QYm"),a=i("mvHQ"),o=i.n(a),n={name:"addOrder",data:function(){return{butTab:0,butList:[{id:0,title:this.$t("marketPrice")},{id:1,title:this.$t("FixedPrice")}],balance:0,stopNum:!0,discUrl:"",sheetTradeShow:"",showSellOut:!1,name:"",stepperOne:1,stepperTwo:"",instrumentid:"",priceType:1,bidPrice:0,askPrice:0,showClosePosition:!1,newClose:0,averageClose:0,bondClose:0,directionClose:0,serviceChargeClose:0,balanceTime:null,FixedPriceOff:!0,tick:0,digits:0,tickCopyData:""}},props:{appTick:{type:Array},tradeTab:{type:Number}},watch:{appTick:function(e){if(""!==JSON.parse(localStorage.tickCopy)&&(this.tickCopyData=JSON.parse(localStorage.tickCopy)),void 0!==this.tickCopyData[this.instrumentid]){var t=this.tickCopyData[this.instrumentid];this.newClose=t.price.toFixed(this.digits),this.bidPrice=t.bidprice.toFixed(this.digits),this.askPrice=t.askprice.toFixed(this.digits)}}},created:function(){var e=this.$route.params;this.name=e.name,this.nameEN=e.nameEN,this.positionid=e.positionid,this.instrumentid=e.instrumentid,this.digits=e.digits,this.direction=e.direction,this.rate=e.rate,this.priceperpoint=e.priceperpoint,this.tick=e.tick;var t=JSON.parse(localStorage.getItem("tickCopy")),i=t[this.instrumentid];this.newClose=i.price.toFixed(this.digits),this.stepperTwo=this.newClose,this.bidPrice=i.bidprice.toFixed(this.digits),this.askPrice=i.askprice.toFixed(this.digits),this.add=(i.price-i.preclose).toFixed(this.digits),0===i.preclose?this.diffPriceRate="--":this.diffPriceRate=((Number(i.price)-Number(i.preclose))/i.preclose*100).toFixed(this.digits)+"%",this.handdleMsg()},methods:{sellOut:function(){this.showClosePosition=!0,this.bondClose=(this.$route.params.bondClose*this.stepperOne).toFixed(2),this.serviceChargeClose=this.$route.params.serviceChargeClose*this.stepperOne},closePosition:function(){this.showSellOut=!0,this.bondClose=(this.$route.params.bondClose*this.stepperOne).toFixed(2),this.serviceChargeClose=this.$route.params.serviceChargeClose*this.stepperOne},quickOrder:function(e){this.butTab=e,0===e?(this.stopNum=!0,this.stepperTwo=this.newClose,this.priceType=1,this.FixedPriceOff=!0):(this.stopNum=!1,this.stepperTwo=this.newClose,this.priceType=0,this.FixedPriceOff=!1)},noShowSheet:function(){this.$router.push({name:"trade"})},ConfirmClosing:function(){var e=this;e.global.ws&&1==e.global.ws.readyState&&(this.global.ws.onopen=this.setPlaceOrder()),e.global.ws.onmessage=function(t){e.getPlaceOrder(t)}},setPlaceOrder:function(){var e;e={action:"placeorder",reqID:103,data:{id:null,userid:null,settlementid:null,source:null,type:0,positionid:null,instrumentid:this.instrumentid,orderRef:"b321ecab-d67d-450c-b2bb-b8caa233877d",ordersysid:null,direction:0,volume:this.stepperOne,volumeTraded:null,priceType:this.priceType,limitPrice:this.stepperTwo,distanceStopPrice:null,distanceProfitPrice:null,status:null,closed:null,frozenMargin:null,frozenMarginMember:null,tradingDay:null,createtime:null,updatetime:null,canceltime:null,hedge:null,hedgeChannel:null,distanceStop:0,distanceProfit:0}},this.global.ws.send(o()(e))},getPlaceOrder:function(e){var t=this;this.redata=JSON.parse(e.data),"placeorder"===this.redata.action&&(0===this.redata.data.code?Object(s.a)({message:t.$t("addMessage"),duration:500,position:"bottom",onClose:function(){t.$router.push({name:"blank"})}}):Object(s.a)({message:t.redata.data.msg,duration:500,position:"bottom",onClose:function(){t.$router.push({name:"blank"})}}))},CancelClosing:function(){var e=this;e.global.ws&&1==e.global.ws.readyState&&(this.global.ws.onopen=this.setPlaceOrder2()),e.global.ws.onmessage=function(t){e.getPlaceOrder2(t)}},setPlaceOrder2:function(){var e;e={action:"placeorder",reqID:104,data:{id:null,userid:null,settlementid:null,source:null,type:0,positionid:null,instrumentid:this.instrumentid,orderRef:"b321ecab-d67d-450c-b2bb-b8caa233877d",ordersysid:null,direction:1,volume:this.stepperOne,volumeTraded:null,priceType:this.priceType,limitPrice:this.stepperTwo,distanceStopPrice:null,distanceProfitPrice:null,status:null,closed:null,frozenMargin:null,frozenMarginMember:null,tradingDay:null,createtime:null,updatetime:null,canceltime:null,hedge:null,hedgeChannel:null,distanceStop:0,distanceProfit:0}},this.global.ws.send(o()(e))},getPlaceOrder2:function(e){var t=this;this.redata=JSON.parse(e.data),"placeorder"===this.redata.action&&(0===this.redata.data.code?Object(s.a)({message:"追加下单成功！",duration:1e3,position:"bottom",onClose:function(){t.$router.push({name:"blank"})}}):s.a.fail({message:this.redata.data.msg,duration:1e3,position:"bottom",onClose:function(){t.$router.push({name:"blank"})}}))},handdleMsg:function(e){var t=this;t.global.ws&&1==t.global.ws.readyState&&t.balanceTimeData(),t.global.ws.onmessage=function(e){t.websocketonmessage(e)}},balanceTimeData:function(){this.global.ws.onopen=this.onopen()},onopen:function(){var e;e={action:"loadusermoney",reqID:17},this.global.ws.send(o()(e))},websocketonerror:function(){this.getLogin()},websocketonmessage:function(e){this.redata=JSON.parse(e.data),0===this.redata.data.code&&"loadusermoney"===this.redata.action&&(this.balance=this.redata.data.object.balance)}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"actionSheet"},[i("van-action-sheet",{staticClass:"sheet-box sheet-trade",attrs:{overlay:"",round:""},on:{cancel:e.noShowSheet,"click-overlay":e.noShowSheet},model:{value:e.sheetTradeShow,callback:function(t){e.sheetTradeShow=t},expression:"sheetTradeShow"}},[i("div",{staticClass:"sheet-content "},[i("div",{staticClass:"title"},[i("div",{staticClass:"name"},[i("div",{class:"en"===e.$i18n.locale?"name-en":""},[e._v(e._s("en"===e.$i18n.locale?e.nameEN:e.name))]),e._v(" "),i("div",{staticStyle:{color:"#808080"}},[e._v(e._s(e.instrumentid))])]),e._v(" "),i("div",{staticClass:"close"},[i("div",{style:{color:e.add<0?e.$t("fall"):e.$t("rise")}},[e._v(e._s(e.newClose))]),e._v(" "),i("div",{style:{color:e.add<0?e.$t("fall"):e.$t("rise")}},[e.add>0?i("span",[e._v("+")]):e._e(),e._v(e._s(e.add)+" "+e._s(e.diffPriceRate))])]),e._v(" "),i("div",{staticClass:"BAPrice"},[i("div",[e._v(e._s(e.$t("Buy"))+"："),i("span",{staticStyle:{color:"#FD4F50"}},[e._v(e._s(e.bidPrice))])]),e._v(" "),i("div",[e._v(e._s(e.$t("Sell"))+"："),i("span",{staticStyle:{color:"#0CAD6B"}},[e._v(e._s(e.askPrice))])])])]),e._v(" "),i("div",{staticClass:"addO-but-box"},e._l(e.butList,function(t,s){return i("div",{key:t.id,staticClass:"addO-but",class:"en"===e.$i18n.locale?"en-addO-but":"",style:{"background-color":e.butTab===s?"rgba(16,136,255,0.1)":"",color:e.butTab===s?"#1988FF":""},on:{click:function(t){return e.quickOrder(s)}}},[e._v(e._s(t.title))])}),0),e._v(" "),i("div",{staticClass:"number"},[i("div",{class:"en"===e.$i18n.locale?"en-number":""},[e._v(e._s(e.$t("Number")))]),e._v("："),i("van-stepper",{class:"en"===e.$i18n.locale?"en-stepper":"",model:{value:e.stepperOne,callback:function(t){e.stepperOne=t},expression:"stepperOne"}})],1),e._v(" "),i("div",{staticClass:"number"},[i("div",{class:"en"===e.$i18n.locale?"en-number":""},[e._v(e._s(e.$t("Price")))]),e._v("："),i("van-stepper",{class:"en"===e.$i18n.locale?"en-stepper":"",attrs:{step:e.tick,min:e.tick,disabled:e.stopNum,"disable-input":e.stopNum,"decimal-length":e.digits},model:{value:e.stepperTwo,callback:function(t){e.stepperTwo=t},expression:"stepperTwo"}})],1),e._v(" "),i("div",{staticClass:"PL-but"},[i("div",{staticClass:"sheet-trade-but",style:{backgroundColor:e.$t("fall")},on:{click:e.closePosition}},[e._v(e._s(e.$t("sell")))]),e._v(" "),i("div",{staticClass:"sheet-trade-but",style:{backgroundColor:e.$t("rise")},on:{click:e.sellOut}},[e._v(e._s(e.$t("buy")))])])])])],1),e._v(" "),i("div",{staticClass:"dialog"},[i("div",{staticClass:"sellOut"},[i("van-dialog",{attrs:{closeOnPopstate:"","show-cancel-button":"","cancel-button-text":e.$t("cancel"),cancelButtonColor:"#8C8B8B",confirmButtonColor:"#1988FF","show-confirm-button":"","confirm-button-text":e.$t("Confirm")},on:{confirm:e.ConfirmClosing},model:{value:e.showClosePosition,callback:function(t){e.showClosePosition=t},expression:"showClosePosition"}},[i("div",{staticClass:"dia-title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("OrderInform")))]),e._v(" "),i("div",{staticClass:"dia-content",attrs:{slot:"default"},slot:"default"},[i("div",[i("div",[e._v(e._s(e.$t("Name"))+"：")]),e._v(" "),i("div",{staticClass:"dia-content-title"},[e._v(e._s("en"===e.$i18n.locale?e.nameEN:e.name))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("code"))+"：")]),e._v(" "),i("div",{staticClass:"dia-content-title1"},[e._v(e._s(e.instrumentid))])]),e._v(" "),e.FixedPriceOff?i("div",[i("div",[e._v(e._s(e.$t("marketPrice"))+"：")]),e._v(" "),i("div",{style:{color:e.add<0?"#25B100":"#FE0000"}},[e._v(e._s(e.newClose))])]):i("div",[i("div",[e._v(e._s(e.$t("FixedPrice"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.stepperTwo))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("Number"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.stepperOne))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("direction"))+"：")]),e._v(" "),i("div",[i("span",{staticStyle:{color:"#FE0000"}},[e._v(e._s(e.$t("buy")))])])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("margin")))]),e._v(" "),i("div",[e._v(e._s(e.bondClose))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("ServiceCharge"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.serviceChargeClose))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("balance"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.balance))])])])])],1),e._v(" "),i("div",{staticClass:"sellOut"},[i("van-dialog",{attrs:{closeOnPopstate:"","show-cancel-button":"","cancel-button-text":e.$t("cancel"),cancelButtonColor:"#8C8B8B",confirmButtonColor:"#1988FF","confirm-button-text":e.$t("Confirm")},on:{confirm:e.CancelClosing},model:{value:e.showSellOut,callback:function(t){e.showSellOut=t},expression:"showSellOut"}},[i("div",{staticClass:"dia-title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("OrderInform")))]),e._v(" "),i("div",{staticClass:"dia-content",attrs:{slot:"default"},slot:"default"},[i("div",[i("div",[e._v(e._s(e.$t("Name"))+"：")]),e._v(" "),i("div",{staticClass:"dia-content-title"},[e._v(e._s("en"===e.$i18n.locale?e.nameEN:e.name))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("code"))+"：")]),e._v(" "),i("div",{staticClass:"dia-content-title1"},[e._v(e._s(e.instrumentid))])]),e._v(" "),e.FixedPriceOff?i("div",[i("div",[e._v(e._s(e.$t("marketPrice"))+"：")]),e._v(" "),i("div",{style:{color:e.add<0?"#25B100":"#FE0000"}},[e._v(e._s(e.newClose))])]):i("div",[i("div",[e._v(e._s(e.$t("FixedPrice"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.stepperTwo))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("Number"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.stepperOne))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("direction"))+"：")]),e._v(" "),i("div",[i("span",{staticStyle:{color:"#25B100"}},[e._v(e._s(e.$t("sell")))])])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("margin")))]),e._v(" "),i("div",[e._v(e._s(e.bondClose))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("ServiceCharge"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.serviceChargeClose))])]),e._v(" "),i("div",[i("div",[e._v(e._s(e.$t("balance"))+"：")]),e._v(" "),i("div",[e._v(e._s(e.balance))])])])])],1)])])},staticRenderFns:[]};var r=i("VU/8")(n,l,!1,function(e){i("eJVW")},"data-v-1ca5baf2",null);t.default=r.exports},eJVW:function(e,t){}});
//# sourceMappingURL=62.47b388dad1049e57f79b.js.map