(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f7475cc"],{6281:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("99af"),a("fb6a");var i=a("d4ec"),n=a("bee2"),r=function(){function t(){Object(i["a"])(this,t)}return Object(n["a"])(t,[{key:"queryString",value:function(t){var e="";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");return e.slice(0,-1)}}]),t}(),o=new r},"99af":function(t,e,a){"use strict";var i=a("23e7"),n=a("d039"),r=a("e8b5"),o=a("861d"),s=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),u=a("1dde"),f=a("b622"),v=a("2d00"),g=f("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",b=v>=51||!n((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),h=u("concat"),C=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:r(t)},x=!b||!h;i({target:"Array",proto:!0,forced:x},{concat:function(t){var e,a,i,n,r,o=s(this),u=d(o,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?o:arguments[e],C(r)){if(n=c(r.length),f+n>p)throw TypeError(m);for(a=0;a<n;a++,f++)a in r&&l(u,f,r[a])}else{if(f>=p)throw TypeError(m);l(u,f++,r)}return u.length=f,u}})},a434:function(t,e,a){"use strict";var i=a("23e7"),n=a("23cb"),r=a("a691"),o=a("50c4"),s=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),u=a("ae40"),f=d("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,e){var a,i,d,u,f,v,h=s(this),C=o(h.length),x=n(t,C),y=arguments.length;if(0===y?a=i=0:1===y?(a=0,i=C-x):(a=y-2,i=p(g(r(e),0),C-x)),C+a-i>m)throw TypeError(b);for(d=c(h,i),u=0;u<i;u++)f=x+u,f in h&&l(d,u,h[f]);if(d.length=i,a<i){for(u=x;u<C-i;u++)f=u+i,v=u+a,f in h?h[v]=h[f]:delete h[v];for(u=C;u>C-i+a;u--)delete h[u-1]}else if(a>i)for(u=C-i;u>x;u--)f=u+i-1,v=u+a-1,f in h?h[v]=h[f]:delete h[v];for(u=0;u<a;u++)h[u+x]=arguments[u+2];return h.length=C-i+a,d}})},be7a:function(t,e,a){},bee2:function(t,e,a){"use strict";function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}a.d(e,"a",(function(){return n}))},cf2a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("div",{staticClass:"top"}),a("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),a("div",{staticClass:"my-bg"},[a("div",{staticClass:"bg",style:{backgroundImage:"url("+t.bg+")"}})]),a("div",{staticClass:"tab-box"},[a("van-tabs",{attrs:{color:"#0c34ba","line-height":"2px",animated:!0,swipeable:!0,"title-active-color":"#0c34ba"},on:{change:t.toggleStatus},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabItems,(function(e,i){return a("van-tab",{key:i,attrs:{title:e.title}},[t.orderDatas.length>0?a("div",t._l(t.orderDatas,(function(e,i){return a("div",{key:i,staticClass:"tab-item"},[a("div",{staticClass:"clearfix tab-item-box"},[a("div",{staticClass:"fl num"},[t._v(t._s(e.orderId))]),a("div",{staticClass:"fr text"},[1==e.status?a("div",{staticClass:"conduct-box",on:{click:function(a){return t.confirmReceive(e,i)}}},[t._v("确认收货")]):a("div",{staticClass:"complete-box"},[a("div",{staticClass:"finished"},[t._v("已完成")]),a("div",{staticClass:"remove",on:{click:function(a){return t.removeOrder(e.orderId,i)}}},[a("van-icon",{attrs:{name:"delete",color:"#999",size:"20"}})],1)])])]),a("div",{staticClass:"order-box"},[a("div",t._l(e.product,(function(e,i){return a("div",{key:i,staticClass:"clearfix cell-box"},[a("div",{staticClass:"fl pro-img"},[a("img",{staticClass:"auto-img",attrs:{src:e.smallImg,alt:""}})]),a("div",{staticClass:"fl pro-info"},[a("div",{staticClass:"text-box"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl text-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"fl text-rule"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"text-enname"},[t._v(t._s(e.enname))])]),a("div",{staticClass:"price-box"},[a("div",{staticClass:"fl price"},[t._v("￥"+t._s(e.price))]),a("div",{staticClass:"fr count"},[t._v(t._s(e.count))])])])])})),0),a("div",{staticClass:"pro-box"},[a("div",{staticClass:"pro-boxing"},[a("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(e.date,"yyyy-MM-dd hh:mm:ss")))]),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl pro-count"},[t._v("共计"+t._s(e.count)+"件商品")]),a("div",{staticClass:"fr pro-total"},[t._v("合计 ￥"+t._s(e.total))])])]),a("div",{staticClass:"circle-box left"}),a("div",{staticClass:"circle-box right"})])])])})),0):a("div",{staticClass:"empty-box"},[a("van-empty",{attrs:{description:"没有订单,去逛一逛！",image:"https://img.yzcdn.cn/vant/custom-empty-image.png"}},[a("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"info"},on:{click:t.goMenu}},[t._v(" 逛一逛 ")])],1)],1)])})),1)],1)],1)},n=[],r=(a("d81d"),a("a434"),a("be7a"),a("6281")),o={data:function(){return{tabIndex:0,orderDatas:[],tabItems:[{title:"全部"},{title:"进行中"},{title:"已完成"}],bg:""}},created:function(){this.getBg(),this.getOrderData(0)},methods:{back:function(){this.$router.go(-1)},goMenu:function(){this.$router.push({name:"Menu"})},getBg:function(){var t=this,e=localStorage.getItem("TK");e&&this.axios({method:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),"A001"==e.data.code&&(t.bg=e.data.result[0].userBg)})).catch((function(e){t.$toast.clear()}))},getOrderData:function(t){var e=this,a=localStorage.getItem("TK");a||setTimeout((function(){return e.$toast("请先登录"),e.$router.go(-1)}),1e3),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:t}}).then((function(t){if(e.orderDatas=[],e.$toast.clear(),"70000"==t.data.code){var a={};for(var i in t.data.result.map((function(t){a[t.oid]?(a[t.oid].count+=t.count,a[t.oid].total+=t.count*t.price,a[t.oid].product.push(t)):a[t.oid]={orderId:t.oid,date:t.createdAt,count:t.count,total:t.count*t.price,status:t.status,product:[t]}})),a)e.orderDatas.push(a[i]);e.orderDatas.sort((function(t,e){return new Date(e.date).getTime()-new Date(t.date).getTime()}))}})).catch((function(t){e.$toast.clear()}))},toggleStatus:function(t,e){this.getOrderData(t)},confirmReceive:function(t,e){var a=this;this.$dialog.confirm({title:"是否确认收货",message:"一旦确认收货将无法修改！",confirmButtonColor:"#0c34ba"}).then((function(){var i=localStorage.getItem("TK");if(i){var n=r["a"].queryString({appkey:a.appkey,tokenString:i,oid:t.orderId});a.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),a.axios({method:"POST",url:"/receive",data:n}).then((function(i){a.$toast.clear(),"80000"==i.data.code&&(a.$toast(i.data.msg),1==a.tabIndex?a.orderDatas.splice(e,1):t.status=2)})).catch((function(t){a.$toast.clear()}))}})).catch((function(){}))},removeOrder:function(t,e){var a=this;this.$dialog.confirm({title:"是否确认删除订单",message:"一旦删除将无法修改！",confirmButtonColor:"#0c34ba"}).then((function(){var i=localStorage.getItem("TK");if(i){var n=r["a"].queryString({appkey:a.appkey,tokenString:i,oid:t});a.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),a.axios({method:"POST",url:"/removeOrder",data:n}).then((function(t){a.$toast.clear(),"90000"==t.data.code&&(a.$toast(t.data.msg),a.orderDatas.splice(e,1))})).catch((function(t){a.$toast.clear()}))}})).catch((function(){}))}}},s=o,c=a("2877"),l=Object(c["a"])(s,i,n,!1,null,"1e148e2e",null);e["default"]=l.exports},d4ec:function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return i}))},d81d:function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").map,r=a("1dde"),o=a("ae40"),s=r("map"),c=o("map");i({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-4f7475cc.b33560e0.js.map