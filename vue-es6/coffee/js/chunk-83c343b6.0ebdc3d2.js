(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83c343b6"],{"0ebc":function(t,o,s){"use strict";s.r(o);var a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"security"},[s("div",{staticClass:"top"}),s("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),s("div",{staticClass:"my-bg"},[s("div",{staticClass:"bg",style:{backgroundImage:"url("+t.bg+")"}})]),s("div",{staticClass:"security-box"},[s("div",[s("van-cell",{attrs:{title:"修改密码",isLink:""},on:{click:t.openPasswordPopup}}),s("van-cell",{attrs:{title:"注销账号",isLink:""},on:{click:t.destroyAccount}})],1)]),s("div",{staticClass:"btn-box"},[s("van-button",{attrs:{round:"",block:"",color:"#0c34ba"},on:{click:t.logout}},[t._v("退出登录")])],1),s("van-popup",{attrs:{closeable:"",round:"",position:"bottom"},model:{value:t.ispopup,callback:function(o){t.ispopup=o},expression:"ispopup"}},[s("div",{staticClass:"zhuce-popup"},[s("div",{staticClass:"popup-title"},[t._v("修改密码")]),s("van-form",[s("van-field",{staticClass:"loginpassword",attrs:{placeholder:"旧密码",type:t.passwords.old.isPassword?"password":"text","right-icon":t.passwords.old.isPassword?"closed-eye":"eye-o"},on:{"click-right-icon":function(o){return t.viewPassword("old")}},model:{value:t.passwords.old.password,callback:function(o){t.$set(t.passwords.old,"password",o)},expression:"passwords.old.password"}}),s("van-field",{staticClass:"loginpassword",attrs:{placeholder:"新密码",type:t.passwords.new.isPassword?"password":"text","right-icon":t.passwords.new.isPassword?"closed-eye":"eye-o"},on:{"click-right-icon":function(o){return t.viewPassword("new")}},model:{value:t.passwords.new.password,callback:function(o){t.$set(t.passwords.new,"password",o)},expression:"passwords.new.password"}}),s("div",{staticClass:"login-btn"},[s("van-button",{attrs:{round:"",block:"","native-type":"submit",color:"#0C34BA"},on:{click:t.confirmPassword}},[t._v("确认修改")])],1)],1)],1)])],1)},e=[],n=(s("a822"),s("6281")),r=s("a880"),i={data:function(){return{ispopup:!1,passwords:{old:{password:"",isPassword:!0},new:{password:"",isPassword:!0}},bg:""}},created:function(){this.isLogin(),this.getBg()},methods:{back:function(){this.$router.go(-1)},isLogin:function(){var t=localStorage.getItem("TK");if(!t)return this.$router.push({name:"Login"})},getBg:function(){var t=this,o=localStorage.getItem("TK");o&&this.axios({method:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:o}}).then((function(o){t.$toast.clear(),"A001"==o.data.code&&(t.bg=o.data.result[0].userBg)})).catch((function(o){t.$toast.clear()}))},viewPassword:function(t){this.passwords[t].isPassword=!this.passwords[t].isPassword},logout:function(){var t=this;this.$dialog.confirm({title:"退出登录",message:"是否确认退出登录！",confirmButtonColor:"#0c34ba"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),localStorage.removeItem("TK"),setTimeout((function(){t.$toast.clear(),t.$router.push({name:"Login"})}),1e3)})).catch((function(){}))},openPasswordPopup:function(){this.ispopup=!0},confirmPassword:function(){var t=this,o=localStorage.getItem("TK");if(!o)return this.$router.push({name:"Login"});var s={oldPassword:{value:this.passwords.old.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"旧密码格式不正确"},password:{value:this.passwords.new.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"新密码格式不正确"}};if(r["a"].valid(s)){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var a=n["a"].queryString({appkey:this.appkey,tokenString:o,oldPassword:this.passwords.old.password,password:this.passwords.new.password});this.axios({method:"POST",url:"/updatePassword",data:a}).then((function(o){t.$toast.clear(),"E001"==o.data.code?(localStorage.removeItem("TK"),setTimeout((function(){t.$router.push({name:"Login"})}),800)):t.$notify({type:"warning",message:o.data.msg,background:"#F4606C"})})).catch((function(o){t.$toast.clear()}))}},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确认注销账号，一旦确认无法恢复！",confirmButtonColor:"#0c34ba"}).then((function(){var o=localStorage.getItem("TK");if(!o)return t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var s=n["a"].queryString({appkey:t.appkey,tokenString:o});t.axios({method:"POST",url:"/destroyAccount",data:s}).then((function(o){t.$toast.clear(),t.$toast(o.data.msg),"G001"==o.data.code?(localStorage.removeItem("TK"),setTimeout((function(){t.$router.push({name:"Login"})}),800)):t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))})).catch((function(){}))}}},c=i,u=s("2877"),d=Object(u["a"])(c,a,e,!1,null,null,null);o["default"]=d.exports},6281:function(t,o,s){"use strict";s.d(o,"a",(function(){return r}));s("99af"),s("fb6a");var a=s("d4ec"),e=s("bee2"),n=function(){function t(){Object(a["a"])(this,t)}return Object(e["a"])(t,[{key:"queryString",value:function(t){var o="";for(var s in t)o+="".concat(s,"=").concat(t[s],"&");return o.slice(0,-1)}}]),t}(),r=new n},"99af":function(t,o,s){"use strict";var a=s("23e7"),e=s("d039"),n=s("e8b5"),r=s("861d"),i=s("7b0b"),c=s("50c4"),u=s("8418"),d=s("65f0"),l=s("1dde"),p=s("b622"),f=s("2d00"),w=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",h=f>=51||!e((function(){var t=[];return t[w]=!1,t.concat()[0]!==t})),b=l("concat"),m=function(t){if(!r(t))return!1;var o=t[w];return void 0!==o?!!o:n(t)},y=!h||!b;a({target:"Array",proto:!0,forced:y},{concat:function(t){var o,s,a,e,n,r=i(this),l=d(r,0),p=0;for(o=-1,a=arguments.length;o<a;o++)if(n=-1===o?r:arguments[o],m(n)){if(e=c(n.length),p+e>g)throw TypeError(v);for(s=0;s<e;s++,p++)s in n&&u(l,p,n[s])}else{if(p>=g)throw TypeError(v);u(l,p++,n)}return l.length=p,l}})},a822:function(t,o,s){},a880:function(t,o,s){"use strict";s.d(o,"a",(function(){return c}));var a=s("d4ec"),e=s("bee2"),n=(s("748b"),s("0860")),r=s("2b0e");r["a"].use(n["a"]);var i=function(){function t(){Object(a["a"])(this,t)}return Object(e["a"])(t,[{key:"valid",value:function(t){for(var o in t)if(!t[o].reg.test(t[o].value))return Object(n["a"])({type:"danger",message:t[o].errorMsg,background:"#F4606C"}),!1;return!0}}]),t}(),c=new i},bee2:function(t,o,s){"use strict";function a(t,o){for(var s=0;s<o.length;s++){var a=o[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,o,s){return o&&a(t.prototype,o),s&&a(t,s),t}s.d(o,"a",(function(){return e}))},d4ec:function(t,o,s){"use strict";function a(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}s.d(o,"a",(function(){return a}))}}]);
//# sourceMappingURL=chunk-83c343b6.0ebdc3d2.js.map